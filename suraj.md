AWS Solutions Associate Architect Associate[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#aws-solutions-associate-architect-associate "Permanent link")
=========================================================================================================================================================================================================================================

Notes[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#notes "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Intro[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#intro "Permanent link")

[Intro to AWS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Intro%20to%20AWS)

#### Computing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#computing "Permanent link")

[Elastic Compute Cloud (EC2)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Compute%20Cloud%20(EC2))\
[Elastic Load Balancer (ELB)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Load%20Balancer%20(ELB))\
[Auto Scaling Group (ASG)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Auto%20Scaling%20Group%20(ASG))\
[Lambda](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Lambda)\
[High Performance Computing (HPC)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/High%20Performance%20Computing%20(HPC))\
[Workflows](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Workflows)

#### Storage[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#storage "Permanent link")

[Instance Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Instance%20Store)\
[Elastic Block Storage (EBS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Block%20Storage%20(EBS))\
[Elastic File System (EFS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20File%20System%20(EFS))\
[Simple Storage Service (S3)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3))\
[Relational Database Service (RDS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Relational%20Database%20Service%20(RDS))\
[Aurora](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Aurora)\
[DynamoDB](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/DynamoDB)\
[ElastiCache](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/ElastiCache)\
[FSx](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/FSx)\
[Redshift](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Redshift)\
[Neptune](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Neptune)\
[ElasticSearch](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/ElasticSearch)

#### Data Migration & Sync[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#data-migration-sync "Permanent link")

[Snow Family](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Snow%20Family)\
[Database Migration Service (DMS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Database%20Migration%20Service%20(DMS))\
[Storage Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Storage%20Gateway)\
[DataSync](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/DataSync)\
[AppSync](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/AppSync)\
[Transfer Family](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Transfer%20Family)

#### Networking[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#networking "Permanent link")

[Route 53](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Route%2053)\
[API Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/API%20Gateway)\
[Virtual Private Cloud (VPC)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Virtual%20Private%20Cloud%20(VPC))\
[PrivateLink](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/PrivateLink)\
[Site-to-Site VPN](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Site-to-Site%20VPN)\
[Direct Connect (DX)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Direct%20Connect%20(DX))\
[Transit Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Transit%20Gateway)\
[Networking Costs](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Networking%20Costs)\
[Reachability Analyzer](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Reachability%20Analyzer)\
[Traffic Mirroring](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Traffic%20Mirroring)

#### Messaging[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#messaging "Permanent link")

[Simple Queue Service (SQS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Queue%20Service%20(SQS))\
[Simple Notification Service (SNS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Notification%20Service%20(SNS))\
[Kinesis](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Kinesis)\
[Amazon MQ](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Amazon%20MQ)\
[EventBridge](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/EventBridge)

#### Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#access-management "Permanent link")

[Identity & Access Management (IAM)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Identity%20&%20Access%20Management%20(IAM))\
[Cognito](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Cognito)\
[Security Token Service (STS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Security%20Token%20Service%20(STS))\
[Identity Federation in AWS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Identity%20Federation%20in%20AWS)\
[AWS Organizations](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/AWS%20Organizations)\
[AWS Directory Services](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/AWS%20Directory%20Services)\
[Single Sign-On (SSO)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Single%20Sign-On%20(SSO))

#### Distribution[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#distribution "Permanent link")

[CloudFront](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFront)\
[Global Accelerator](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Global%20Accelerator)

#### Monitoring & Audit[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#monitoring-audit "Permanent link")

[CloudWatch](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudWatch)\
[CloudTrail](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudTrail)\
[Config](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Config)\
[X-Ray](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/X-Ray)\
[Trusted Advisor](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Trusted%20Advisor)\
[CostExplorer](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CostExplorer)

#### Containerization[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#containerization "Permanent link")

[Elastic Container Service (ECS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Container%20Service%20(ECS))\
[Elastic Kubernetes Service (EKS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Kubernetes%20Service%20(EKS))\
[Elastic Container Registry (ECR)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Container%20Registry%20(ECR))

#### Deployment[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#deployment "Permanent link")

[CloudFormation](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFormation)\
[Elastic Beanstalk](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Beanstalk)\
[Serverless Application Model (SAM)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Serverless%20Application%20Model%20(SAM))\
[Continuous Integration Continuous Delivery (CICD)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Continuous%20Integration%20Continuous%20Delivery%20(CICD))\
[Blue-Green Deployment](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Blue-Green%20Deployment)

#### Parameters & Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#parameters-encryption "Permanent link")

[Key Management Service (KMS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Key%20Management%20Service%20(KMS))\
[SSM Parameter Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/SSM%20Parameter%20Store)\
[Secrets Manager](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Secrets%20Manager)\
[CloudHSM](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudHSM)\
[OpsWorks](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/OpsWorks)

#### Analytics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#analytics "Permanent link")

[Athena](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Athena)\
[Elastic Map Reduce (EMR)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Map%20Reduce%20(EMR))\
[Glue](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Glue)

#### Cloud Security[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#cloud-security "Permanent link")

[AWS Shield](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/AWS%20Shield)\
[Web Application Firewall (WAF)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Web%20Application%20Firewall%20(WAF))\
[Firewall Manager](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Firewall%20Manager)\
[GuardDuty](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/GuardDuty)\
[Inspector](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Inspector)\
[Macie](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Macie)


#### Disaster Recovery[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#disaster-recovery "Permanent link")

[Disaster Recovery](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Disaster%20Recovery)\
[AWS Backup](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/AWS%20Backup)

#### Sharing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#sharing "Permanent link")

[Resource Access Manager (RAM)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Resource%20Access%20Manager%20(RAM))

#### Misc[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#misc "Permanent link")

[Amazon WorkSpaces](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Amazon%20WorkSpaces)\
[Well Architected Framework](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Well%20Architected%20Framework)\
[Extras](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Extras)

Architecture[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20solutions%20architect%20associate%20(saa-c02)/#architecture "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[Serverless ToDo List App](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Serverless%20ToDo%20List%20App)\
[Serverless Blogging Website](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Serverless%20Blogging%20Website)\
[Serverless Premium Stock Video Website](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Serverless%20Premium%20Stock%20Video%20Website)\
[DDoS Protection](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/DDoS%20Protection)\
[Cost Effective Highly Available Monolithic Architecture](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Cost%20Effective%20Highly%20Available%20Monolithic%20Architecture)

Intro to AWS[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/intro%20to%20aws/#intro-to-aws "Permanent link")
========================================================================================================================================

Region[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/intro%20to%20aws/#region "Permanent link")
----------------------------------------------------------------------------------------------------------------------------

-   **Cluster of Availability Zones** (usually 3, min 2, max 6) within a geographic region
-   Ex: `us-east-1`, `ap-south-1`
-   Consideration when selecting a region
    -   Compliance (some countries require the data to be present in a data centre present in that country by law)
    -   Proximity to customers: reduced latency
    -   Available services within a Region: new services and new features aren't available in every Region
    -   Pricing: pricing varies region to region and is transparent in the service pricing page

Availability Zone (AZ)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/intro%20to%20aws/#availability-zone-az "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Each AZ is one or more discrete data centers with redundant power, networking, and connectivity
-   Ex: `us-east-1a`, `us-east-1b` & `us-east-1c`
-   AZs are separated from each other (isolated from disasters)
-   They're connected with high bandwidth, ultra-low latency networking

> AZ name (eg. us-east-1a) is linked to an AWS account. **Same AZ name for two AWS accounts might not refer to the same physical AZ**. Use **AZ ID (unique ID for each AZ)** to coordinate AZ across accounts.


Elastic Compute Cloud (EC2)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#elastic-compute-cloud-ec2 "Permanent link")
=====================================================================================================================================================================================

-   Regional Service
-   EC2 (Elastic Compute Cloud) is an **Infrastructure as a Service (IaaS)**
-   Stopping & Starting an instance may change its public IP but not its private IP
-   **AWS Compute Optimizer** recommends optimal AWS Compute resources for your workloads
-   There is a vCPU-based On-Demand Instance soft limit per region

User Data[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#user-data "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------

-   Some commands that run when the instance is launched for the first time (doesn't execute for subsequent runs)
-   Used to automate **dynamic** boot tasks (that cannot be done using AMIs)
    -   Installing updates
    -   Installing software
    -   Downloading common files from the internet
-   Runs with the **root user privilege**

Instance Classes[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#instance-classes "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **General Purpose**
    -   Great for a diversity of workloads such as **web servers** or **code repositories**
    -   Balance between compute, memory & networking
-   **Compute Optimized**
    -   Great for compute intensive tasks
        -   Batch Processing
        -   Media Transcoding
        -   HPC
        -   Gaming Servers
-   **Memory Optimized**
    -   Great for **in-memory databases** or **distributed web caches**
-   **Storage Optimized**
    -   Great for storage intensive tasks (accessing local databases)
        -   OLTP systems
        -   Distributed File System (DFS)

Security Groups[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#security-groups "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Only contain Allow rules**
-   External firewall for EC2 instances (if a request is blocked by SG, instance will never know)
-   Security groups rules can reference a resource by IP or Security Group
-   Default SG
    -   inbound traffic from the same SG is allowed
    -   all outbound traffic is allowed
-   New SG
    -   all inbound traffic is blocked
    -   all outbound traffic is allowed
-   A security group can be attached to multiple instances and vice versa
-   Bound to a VPC (and hence to a region)
-   Recommended to maintain a separate security group for SSH access
-   Blocked requests will give a **Time Out** error

IAM Roles for EC2 instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#iam-roles-for-ec2-instances "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Never enter AWS credentials into the EC2 instance, instead attach [IAM Roles](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Identity%20&%20Access%20Management%20(IAM)#roles) to the instances

Purchasing Options[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#purchasing-options "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

#### On-demand Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#on-demand-instances "Permanent link")

-   Pay per use (no upfront payment)
-   Highest cost
-   No long-term commitment
-   Recommended for short-term, uninterrupted and **unpredictable** workloads

#### Standard Reserved Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#standard-reserved-instances "Permanent link")

-   Reservation Period: 1 year or 3 years
-   Recommended for steady-state applications (like database)
-   **Sell unused instances** on the Reserved Instance Marketplace

#### Convertible Reserved Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#convertible-reserved-instances "Permanent link")

-   Can change the instance type
-   Lower discount
-   **Cannot sell unused instances** on the Reserved Instance Marketplace

#### Scheduled Reserved Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#scheduled-reserved-instances "Permanent link")

-   reserved for a time window (ex. everyday from 9AM to 5PM)

#### Spot Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#spot-instances "Permanent link")

-   Work on a bidding basis where you are willing to pay a specific max hourly rate for the instance. Your instance can terminate if the spot price increases.
-   **Spot blocks** are designed not to be interrupted
-   Good for workloads that are resilient to failure
    -   Distributed jobs (resilient if some nodes go down)
    -   Batch jobs

#### Dedicated Hosts[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#dedicated-hosts "Permanent link")

-   Server hardware is allocated to a specific company (not shared with other companies)
-   **3 year reservation** period
-   Billed per host
-   Useful for software that have **BYOL (Bring Your Own License)** or for companies that have strong regulatory or compliance needs

#### Dedicated Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#dedicated-instances "Permanent link")

-   Dedicated hardware
-   Billed per instance
-   No control over instance placement

#### On-Demand Capacity Reservations[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#on-demand-capacity-reservations "Permanent link")

-   Ensure you have the available capacity in an AZ to launch EC2 instances when needed
-   Can reserve for a recurring schedule (ex. everyday from 9AM to 5PM)
-   No need for 1 or 3-year commitment (independent of billing discounts)
-   Need to specify the following to create capacity reservation: - AZ - Number of instances - Instance attributes

Reserved Capacity & Instances Comparison

![attachments/Pasted image 20220516114146.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220516114146.jpg)

Spot Instances[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#spot-instances_1 "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Spot Requests[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#spot-requests "Permanent link")

-   **One-time**: Request once opened, spins up the spot instances and the request closes.
-   **Persistent**:
    -   Request will stay disabled while the spot instances are up and running.
    -   It becomes active after the spot instance is interrupted.
    -   If you stop the spot instance, the request will become active only after you start the spot instance.
-   You can only cancel spot instance requests that are open, active, or disabled.
-   Cancelling a Spot Request does not terminate instances. You must first cancel a Spot Request, and then terminate the associated Spot Instances.

#### Spot Fleets[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#spot-fleets "Permanent link")

-   Combination of spot and on-demand instances (optional) that tries to **optimize for cost or capacity**
-   **Launch Templates must be used to have on-demand instances in the fleet**
-   Can consist of instances of different classes
-   Strategies to allocate Spot Instances:
    -   **lowestPrice** - from the pool with the lowest price (cost optimization, short workload)
    -   **diversified** - distributed across all pools (great for availability, long workloads)
    -   **capacityOptimized** - pool with the optimal capacity for the number of instances

Elastic IP[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#elastic-ip "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   **Static Public IP** that you own as long as you don't delete it
-   Can be attached to an EC2 instance (even when it is stopped)
-   Soft limit of 5 elastic IPs per account
-   Doesn't incur charges as long as the following conditions are met (EIP behaving like any other public IP randomly assigned to an EC2 instance):
    -   The Elastic IP is associated with an Amazon EC2 instance
    -   The instance associated with the Elastic IP is running
    -   The instance has only one Elastic IP attached to it

Placement Groups (Placement Strategies)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#placement-groups-placement-strategies "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Cluster Placement Group (optimize for network)**
    -   All the instances are placed on the same hardware (same rack)
    -   Pros: Great network (10 Gbps bandwidth between instances)
    -   Cons: If the rack fails, all instances will fail at the same time
    -   Used in **HPC** (minimize inter-node latency & maximize throughput)
    -   Image
        -   ![attachments/Pasted image 20220505231518.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220505231518.jpg)
-   **Spread Placement Group (maximize availability)**
    -   Each instance is in a separate rack (physical hardware) inside an AZ
    -   Supports Multi AZ
    -   Up to 7 instances per AZ per placement group (ex. for 15 instances, need 3 AZ)
    -   Used for critical applications
    -   Image
        -   ![attachments/Pasted image 20220505232110.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220505232110.jpg)
-   **Partition Placement Group (balance of performance and availability)**
    -   Instances in a partition share rack with each other
    -   If the rack goes down, the entire partition goes down
    -   Up to 7 partitions per AZ
    -   Used in **big data** applications (Hadoop, HDFS, HBase, Cassandra, Kafka)
    -   Image
        -   ![attachments/Pasted image 20220505232434.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220505232434.jpg)

> If you receive a **capacity error** when launching an instance in a placement group that already has running instances, stop and start all of the instances in the placement group, and try the launch again. Restarting the instances may migrate them to hardware that has capacity for all the requested instances.

Elastic Network Interface (ENI)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#elastic-network-interface-eni "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   ENI is a virtual network card that **gives a private IP to an EC2 instance**
-   A primary ENI is created and attached to the instance upon creation and will be deleted automatically upon instance termination.
-   We can create additional ENIs and attach them to an EC2 instance to access it via multiple private IPs.
-   We can detach & attach ENIs across instances
-   **ENIs are tied to the subnet** (and hence to the AZ)

Instance States[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#instance-states "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Stop**
    -   EBS root volume is preserved
-   **Terminate**
    -   EBS root volume gets destroyed
-   **Hibernate**
    -   Hibernation saves the contents from the instance memory (RAM) to the EBS root volume
    -   EBS root volume is preserved
    -   The instance boots much faster as the OS is not stopped and restarted
    -   When you start your instance:
        -   EBS root volume is restored to its previous state
        -   RAM contents are reloaded
        -   Processes that were previously running on the instance are resumed
        -   Previously attached data volumes are reattached and the instance retains its instance ID
    -   Should be used for applications that take a long time to start
    -   **Not supported for Spot Instances**
    -   Max hibernation duration = **60 days**
-   **Standby**
    -   Instance remains attached to the [ASG](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Auto%20Scaling%20Group%20(ASG)) but is temporarily put out of service (the ASG doesn't replace this instance)
    -   Used to install updates or troubleshoot a running instance

EC2 Nitro[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#ec2-nitro "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------

-   Newer virtualization technology for EC2 instances
-   Better networking options (enhanced networking, HPC, IPv6)
-   Higher Speed EBS (64,000 EBS IOPS max on Nitro instances whereas 32,000 on non-Nitro)
-   Better underlying security

vCPU & Threads[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#vcpu-threads "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   vCPU is the total number of concurrent threads that can be run on an EC2 instance
-   Usually 2 threads per CPU core (eg. 4 CPU cores ⇒ 8 vCPU)

Storage[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#storage "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

[Instance Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Instance%20Store)\
[Elastic Block Storage (EBS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Block%20Storage%20(EBS))\
[Elastic File System (EFS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20File%20System%20(EFS))

Monitoring[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#monitoring "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

[CloudWatch ⮕ EC2 Monitoring](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudWatch#ec2-monitoring)

Amazon Machine Image (AMI)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#amazon-machine-image-ami "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   AMIs are the image of the instance after installing all the necessary OS, software and configuring everything.
-   It boots much faster because the whole thing is pre-packaged and doesn't have to be installed separately for each instance.
-   Good for static configurations
-   **Bound to a region** (can be copied across regions)

> When the new AMI is copied from region A into region B, it automatically creates a snapshot in region B because AMIs are based on the underlying snapshots.

Instance Metadata[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#instance-metadata "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Url to fetch metadata about the instance (http://169.254.169.254/latest/meta-data)
-   This URL is internal to AWS and can only be hit from the instance

EC2 Classic & ClassicLink[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#ec2-classic-classiclink "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Instances run in single network shared with other customers (this is how AWS started)
-   **ClassicLink** allows you to link EC2-Classic instances to a VPC in your account

Billing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#billing "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

-   **Reserved instances will be billed regardless of their state** (billed for a reserved period)
-   **On-demand instances in `stopping` state when preparing to hibernate will be billed**
-   If an instance is running, it will be billed
-   In all the other cases, an instance will not be billed

Run Command[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#run-command "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   Systems Manager **Run Command** lets you remotely and securely **manage the configuration** of your **managed instances**. A *managed instance* is any EC2 instance that has been configured for **Systems Manager**.
-   Run Command enables you to **automate common administrative tasks** and perform ad-hoc configuration changes at scale.
-   You can use Run Command from the **AWS Console**, the AWS CLI, AWS Tools for Windows PowerShell, or the AWS SDKs. Run Command is offered at no additional cost.

Instance Tenancy[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#instance-tenancy "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Default**: Instance runs on shared hardware
-   **Dedicated**: Instance runs on single-tenant hardware
-   **Host**: Instance runs on dedicated host

> -   Tenancy of an instance can only be changed from **host to dedicated** or **dedicated to host** after the instance has been launched.
> -   Dedicated instance tenancy takes precedence over Default instance tenancy

Troubleshooting[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20compute%20cloud%20(ec2)/#troubleshooting "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   The following are a few reasons why an instance might immediately terminate:
    -   You've reached your EBS volume limit.
    -   An EBS snapshot is corrupt.
    -   The root EBS volume is encrypted and you do not have permissions to access the KMS key for decryption.
    -   The instance store-backed AMI that you used to launch the instance is missing a required part.


Elastic Load Balancer[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#elastic-load-balancer "Permanent link")
===========================================================================================================================================================================

-   Regional Service
-   Supports Multi AZ
-   Spread load across multiple EC2 instances
-   Separate public traffic from private traffic
-   Health checks allow ELB to know which instances are working properly (done on a port and a route, `/health` is common)
-   **Does not support weighted routing**

> If no targets are associated with the target groups => **503 Service Unavailable**
>
> Using ALB & NLB, instances in peered VPCs can be used as targets using IP addresses.

Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#types "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------

#### Classic Load Balancer (CLB) - deprecated[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#classic-load-balancer-clb-deprecated "Permanent link")

-   **Load Balancing to a single application**
-   Supports HTTP, HTTPS (layer 7) & TCP (layer 4)
-   Health checks are HTTP or TCP based
-   Provides a fixed hostname (xxx.region.elb.amazonaws.com)

#### Application Load Balancer (ALB)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#application-load-balancer-alb "Permanent link")

-   **Load balancing to multiple applications** (target groups) based on the request parameters
-   Operates at Layer 7 (HTTP, HTTPS and WebSocket)
-   Provides a fixed hostname (xxx.region.elb.amazonaws.com)
-   ALB terminates the upstream connection and creates a new downstream connection to the targets (TCP termination)
-   **Security Groups can be attached to ALBs** to filters requests
-   Great for micro services & container-based applications (Docker & ECS)
-   Client info is passed in the request headers
    -   Client IP => `X-Forwarded-For`
    -   Client Port => `X-Forwarded-Port`
    -   Protocol => `X-Forwarded-Proto`
-   Target Groups
    -   Health checks are done at the target group level
    -   Target Groups could be
        -   EC2 instances - HTTP
        -   ECS tasks - HTTP
        -   Lambda functions - HTTP request is translated into a JSON event
        -   Private IP Addresses
-   **Listener Rules** can be configured to route traffic to different target groups based on:
    -   Path (example.com/users & example.com/posts)
    -   Hostname (one.example.com & other.example.com)
    -   Query String (example.com/users?id=123&order=false)
    -   Request Headers
    -   Source IP address

#### Network Load Balancer (NLB)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#network-load-balancer-nlb "Permanent link")

-   Operates at Layer 4 (TCP, UDP)
-   Can handle millions of request per seconds (extreme performance)
-   **Lower latency** ~ 100 ms (vs 400 ms for ALB)
-   **1 static public IP per AZ** (vs a static hostname for CLB & ALB)
-   **Elastic IP can be assigned to NLB** (helpful for whitelisting specific IP)
-   Maintains the same connection (TCP or UDP) from client all the way to the target application
-   **No security groups can be attached to NLBs.** Since they operate on layer 4, they cannot see the data available at layer 7. They just forward the incoming traffic to the right target group as if those requests were directly coming from client. So, the **attached instances must allow TCP traffic on port 80 from anywhere**.
-   Within a target group, NLB can send traffic to
    -   **EC2 instances**
        -   If you specify targets using an instance ID, traffic is routed to instances using the **primary private IP address**
    -   **IP addresses**
        -   Used when you want to balance load for a physical server having a static IP.
    -   **Application Load Balancer (ALB)**
        -   Used when you want a static IP provided by an NLB but also want to use the features provided by ALB at the application layer.

#### Gateway Load Balancer (GWLB)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#gateway-load-balancer-gwlb "Permanent link")

-   Operates at layer 3 (Network layer) - IP Protocol
-   Used to route requests to a fleet of 3rd party virtual appliances like Firewalls, Intrusion Detection and Prevention Systems (IDPS), etc.
-   Performs two functions:
    -   **Transparent Network Gateway** (single entry/exit for all traffic)
    -   Load Balancer (distributes traffic to virtual appliances)
-   Uses GENEVE protocol
-   Target groups for GWLB could be
    -   EC2 instances
    -   IP addresses

Sticky Sessions (Session Affinity)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#sticky-sessions-session-affinity "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Requests coming from a client is always redirected to the same instance based on a cookie. After the cookie expires, the requests coming from the same user might be redirected to another instance.
-   **Only supported by CLB & ALB** because the cookie can be seen at layer 7
-   Used to ensure the user doesn't lose his session data, like login or cart info, while navigating between web pages.
-   **Stickiness may cause load imbalance**
-   Cookies could be
    -   **Application-based** (TTL defined by the application)
    -   **Load Balancer generated** (TTL defined by the load balancer)
-   ELB reserved cookie names (should not be used)
    -   AWSALB
    -   AWSALBAPP
    -   AWSALBTG

Cross-zone Load Balancing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#cross-zone-load-balancing "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Allows ELBs in different AZ containing unbalanced number of instances to distribute the traffic evenly across all instances in all the AZ registered under a load balancer.
-   Image
    -   ![attachments/Pasted image 20220506220851.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220506220851.jpg)
-   Supported Load Balancers
    -   Classic Load Balancer
        -   Disabled by default
        -   No charges for inter AZ data
    -   Application Load Balancer
        -   Always on (can't be disabled)
        -   No charges for inter AZ data
    -   Network Load Balancer
        -   Disabled by default
        -   Charges for inter AZ data

In-flight Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#in-flight-encryption "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Use an NLB with a TCP listener & terminate SSL on EC2 instances
-   Use an ALB with an HTTPS listener, install SSL certificates on the ALB & terminate SSL on the ALB
-   Communication between ALB & EC2 instances can happen over HTTP inside the VPC
-   **Server Name Indication (SNI)**
    -   SNI allows us to load multiple SSL certificates on one Load Balancer to serve multiple websites securely
        -   ![attachments/Pasted image 20220506222424.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220506222424.jpg)
    -   **Only works for ALB & NLB** (CLB only supports one SSL certificate)
    -   Newer protocol, not every client supports it yet
    -   **Supported in CloudFront** also

Connection Draining (De-registration Delay)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#connection-draining-de-registration-delay "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   When an instance is to be de-registered from the ELB, the in-flight requests being served by that instance are given some pre-defined time to complete before the ELB de-registers it.
-   ELB stops sending new requests to the EC2 instance which is de-registering
-   Set manually (0 to 3600 seconds) (**default: 300 seconds**)

> For instances behind an ELB and using ASG, increase the de-registration delay to ensure that the in-flight requests are completed before the ELB deregisters an instance which is to be terminated by the ASG.

Access Logs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#access-logs "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   Captures detailed information about requests sent to the load balancer
-   Used to analyze traffic patterns and troubleshoot issues
-   Disabled by default

Misc[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20load%20balancer%20(elb)/#misc "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   Security Groups for a public facing ELB
    -   ELB will be publicly available on the internet, so it's security group should allow HTTP and HTTPS traffic from anywhere. EC2 should only allow traffic from the ELB, so the its security group should allow HTTP requests from ELB's security group.
    -   Image
        -   ![attachments/Pasted image 20220506205310.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220506205310.jpg)



Auto Scaling Group (ASG)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#auto-scaling-group-asg "Permanent link")
============================================================================================================================================================================

-   Regional Service
-   Supports Multi AZ
-   Automatically add or remove instances (scale horizontally) based on the load
-   Free (pay for the underlying resources)
-   IAM roles attached to an ASG will get assigned to the launched EC2 instances
-   ASG can terminate instances marked as unhealthy by an ELB (and hence replace them)

> Even if an ASG is deployed across 3 AZs, minimum number of instances to remain highly available is still 2
>
> If you have an ASG with running instances and you delete the ASG, the instances will be terminated and the ASG will be deleted.

Scaling Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#scaling-policies "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Scheduled Scaling**
    -   Scale based on a schedule
    -   Used when the load pattern is predictable
-   **Simple Scaling**
    -   Scale to certain size on a CloudWatch alarm
    -   Ex. when CPU > 90%, then scale to 10 instances
-   **Step Scaling**
    -   Scale incrementally in steps using CloudWatch alarms
    -   Ex. when CPU > 70%, then add 2 units and when CPU < 30%, then remove 1 unit
    -   Specify the **instance warmup time** to scale faster
-   **Target Tracking Scaling**
    -   ASG maintains a CloudWatch metric and scale accordingly (automatically creates CW alarms)
    -   Ex. maintain CPU usage at 40%
-   **Predictive Scaling**
    -   Historical data is used to predict the load pattern using ML and scale automatically

Launch Configuration & Launch Template[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#launch-configuration-launch-template "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Defines the following info for ASG
    -   AMI (Instance Type)
    -   EC2 User Data
    -   EBS Volumes
    -   Security Groups
    -   SSH Key Pair
    -   Min / Max / Desired Capacity
    -   Subnets (where the instances will be created)
    -   Load Balancer (specify which ELB to attach instances)
    -   Scaling Policy
-   **Launch Configuration** (legacy)
    -   Cannot be updated (must be re-created)
    -   **Does not support Spot Instances**
-   **Launch Template** (newer)
    -   Versioned
    -   Can be updated
    -   **Supports both On-Demand and Spot Instances**
    -   Recommended by AWS

Scaling Cooldown[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#scaling-cooldown "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   After a scaling activity happens, the ASG goes into cooldown period (default 300 seconds) during which it does not launch or terminate additional instances (ignores scaling requests) to allow the metrics to stabilize.
-   Use a ready-to-use AMI to launch instances faster to be able to reduce the cooldown period

Health Checks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#health-checks "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------

-   By default, ASG uses the EC2 status check (not the ELB health check). This could explain why some instances that are labelled as unhealthy by an ELB are still not terminated by the ASG.
-   To prevent ASG from replacing unhealthy instances, suspend the **ReplaceUnhealthy** process type

> ASG creates a new scaling activity for terminating the unhealthy instance and then terminates it. Later, another scaling activity launches a new instance to replace the terminated instance.

Termination Policy[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#termination-policy "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Select the AZ with the most number of instances
-   Delete the instance with the oldest launch configuration
-   Delete the instance which is closest to the next billing hour
-   Flow diagram
    -   ![attachments/Pasted image 20220514202214.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220514202214.jpg)

> -   ASG does not immediately terminate instances with an **Impaired** status, it waits a few minutes for the instance to recover.
> -   ASG doesn't terminate an instance that came into service based on EC2 status checks and ELB health checks until the **health check grace period** expires.

Rebalancing AZs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#rebalancing-azs "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------

-   ASG ensures that the group never goes below the minimum scale. Actions such as changing the AZ for the group or explicitly terminating or detaching instances can lead to the ASG becoming unbalanced between AZs. In such cases, ASG compensates by **rebalancing** the AZs by **launching new instances before terminating the old ones**, so that rebalancing does not compromise the performance or availability of the application.

Lifecycle Hooks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#lifecycle-hooks "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to perform extra steps before creating or terminating an instance. Example:
    -   Install some extra software or do some checks (during pending state) before declaring the instance as "in service"
    -   Before the instance is terminated (terminating state), extract the log files
-   **Without lifecycle hooks, pending and terminating states are avoided**
-   Flow diagram
    -   ![attachments/Pasted image 20220506232117.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220506232117.jpg)

Attach running instances to an existing ASG[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/auto%20scaling%20group%20(asg)/#attach-running-instances-to-an-existing-asg "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   The running instance must meet the following criteria:
    -   The AMI used to launch the instance still exists
    -   The instance is not a member of another ASG
    -   The instance is launched into one of the AZ defined in your ASG


Lambda[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#lambda "Permanent link")
==================================================================================================================

-   Function as a Service (FaaS)
-   Serverless
-   Auto-scaling
-   Pay per request (number of invocations) and compute time
-   Integrated with CloudWatch for monitoring
-   **Not good for running containerized applications**
-   Can package and deploy Lambda functions as container images

Performance[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#performance "Permanent link")
----------------------------------------------------------------------------------------------------------------------------

-   Increasing RAM will improve CPU and network
-   RAM: 128 MB - 10GB
-   **Max execution time: 15 mins**
-   Disk capacity in function container (`/tmp`): 512 MB
-   Environment variables: 4 KB

Deployment[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#deployment "Permanent link")
--------------------------------------------------------------------------------------------------------------------------

-   Deployment size
    -   Compressed: 50MB
    -   Uncompressed: 250 MB
-   If you intend to reuse code in more than one Lambda function, consider creating a **Lambda Layer** (a ZIP archive that contains libraries) for the reusable code. With layers, you can **use libraries in your function without including them in the deployment package**. Layers let you keep your deployment package small, which makes development easier. A function can use up to 5 layers at a time.

Networking[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#networking "Permanent link")
--------------------------------------------------------------------------------------------------------------------------

-   By default, **Lambda functions operate from an AWS-owned VPC** and hence have **access to any public internet** or **public AWS API** (ex. lambda functions can interact with AWS DynamoDB APIs to PutItem)
-   Once a Lambda function is **VPC-enabled**, all network traffic from your function is subject to the routing rules of your VPC/Subnet. If your function needs to interact with a public resource, it will need a [NAT Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Virtual%20Private%20Cloud%20(VPC)#nat-gateway). You should only enable your functions for VPC access when you need to interact with a private resource located in a private subnet (ex. RDS database)

> To enable your Lambda function to access resources inside your private VPC, you must provide **VPC subnet IDs** and **Security Group IDs**. AWS Lambda uses this information to set up ENIs.

Supported Languages[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#supported-languages "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------

-   Node.js (JavaScript)
-   Python
-   Java
-   C#
-   Golang
-   Ruby
-   Any other language using Custom Runtime API (community supported, example Rust)

Use cases[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#use-cases "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   Serverless thumbnail creation using S3 & Lambda
-   Serverless CRON job using EventBridge & Lambda

Lambda@Edge[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/lambda/#lambdaedge "Permanent link")
---------------------------------------------------------------------------------------------------------------------------

-   Deploy Lambda functions alongside your [CloudFront](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFront) CDN for computing at edge locations
-   Customize the CDN content using Lambda at the edge location (responsive)
-   No server management (Lambda is deployed globally)
-   Pay for what you use (no provisioning)
-   Can be used to modify CloudFront requests & responses
    -   ![attachments/Pasted image 20220510194136.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510194136.jpg)
-   We can create a global application using Lambda@Edge where S3 hosts a static website which uses client side JS to send requests to CF which will process the request in a lambda function in that edge location to perform some operation like fetching data from DynamoDB.
    -   ![attachments/Pasted image 20220510194430.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510194430.jpg)


High Performance Computing (HPC)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/high%20performance%20computing%20(hpc)/#high-performance-computing-hpc "Permanent link")
====================================================================================================================================================================================================

-   Cloud is perfect for HPC
-   **Cluster placement group** for low latency inter-nodal communication
-   **EC2 Enhanced Networking (SR-IOV)**
    -   **Elastic Network Adapter (ENA)**
        -   Supported in both Linux & **Windows**
    -   **Elastic Fabric Adapter (EFA)**
        -   Enhanced for HPC
        -   Supported in **Linux** only
        -   Leverages **Message Passing Interface (MPI)** standard
        -   Bypasses the underlying Linux OS to provide low-latency networking
-   **AWS Batch**
    -   Used to run **single jobs that span multiple EC2 instances** (multi-node)
-   **AWS Parallel Cluster**
    -   **Open-source cluster management** tool to **deploy HPC on AWS**
    -   Configure with text files
    -   Automate creation of VPC, Subnet, cluster type and instance types
    -   Ability to enable **EFA** on the cluster


Workflows[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/workflows/#workflows "Permanent link")
===========================================================================================================================

Step Functions[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/workflows/#step-functions "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------

-   Used to build **serverless workflows** to **orchestrate Lambda functions**
-   Represent flow as a **JSON state machine**
-   Maximum workflow execution time: 1 year
-   Features: sequence, parallel, conditions, timeouts, error handling, etc.
-   Provides a **visual graph** showing the current state and which path the workflow has taken

    - ![attachments/Pasted image 20220513231346.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513231346.jpg)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/workflows/#- "Permanent link")
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Simple Workflow Service (SWF)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/workflows/#simple-workflow-service-swf "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Outdated service (step functions are preferred instead)
-   Code runs on EC2 (not serverless)
-   **Ensures that a task is never duplicated** (could replace standard SQS queues)
-   1 year max runtime
-   **Built-in human intervention step**
-   Step Functions are recommended to be used for new applications, except:
    -   If you need external signals to intervene in the processes
    -   If you need child processes that return values to parent processes


Instance Store[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/instance%20store/#instance-store "Permanent link")
============================================================================================================================================

-   **Hardware storage directly attached to EC2 instance** (cannot be detached and attached to another instance)
-   **Highest IOPS** of any available storage (millions of IOPS)
-   **Ephemeral storage** (loses data when the instance is stopped, **hibernated** or terminated)
-   Good for buffer / cache / scratch data / temporary content
-   AMI created from an instance does not have its instance store volume preserved

> You can specify the instance store volumes only when you launch an instance. You can't attach instance store volumes to an instance after you've launched it.

RAID[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/instance%20store/#raid "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   **RAID 0**
    -   Improve performance of a storage volume by distributing reads & writes in a stripe across attached volumes
    -   If you add a storage volume, you get the straight addition of throughput and IOPS
    -   For high performance applications
-   **RAID 1**
    -   Improve data availability by mirroring data in multiple volumes
    -   For critical applications

Elastic Block Storage (EBS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#elastic-block-storage-ebs "Permanent link")
=====================================================================================================================================================================================

-   Volume **Network Drive** (provides low latency access to data)
-   Can only be mounted to 1 instance at a time (except EBS multi-attach)
-   **Bound to an AZ**
-   Must provision capacity in advance (size in GB & throughput in IOPS)
-   By default, upon instance termination, the root EBS volume is deleted and any other attached EBS volume is not deleted (can be over-ridden using `DeleteOnTermination` attribute)
-   To replicate an EBS volume across AZ or region, need to copy its snapshot
-   EBS Multi-attach allows the same EBS volume to attach to multiple EC2 instances **in the same AZ**

> `DeleteOnTermination` attribute can be updated for the root EBS volume only from the CLI

Volume Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#volume-types "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------

#### General Purpose SSD[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#general-purpose-ssd "Permanent link")

-   Good for system boot volumes, virtual desktops
-   Storage: 1 GB - 16 TB
-   **gp3**
    -   **3,000 lOPS baseline** (max 16,000 - independent of size)
    -   125 MiB/s throughput (max 1000MiB/s - independent of size)
-   **gp2**
    -   **Burst IOPS up to 3,000**
    -   **3 IOPS per GB**
    -   **Max IOPS: 16,000** (at 5,334 GB)

#### Provisioned IOPS SSD**[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#provisioned-iops-ssd "Permanent link")

-   Optimized for **Transaction-intensive Applications** with high frequency of **small & random IO operations**. They are sensitive to increased I/O latency.
-   Maintain high IOPS while keeping I/O latency down by maintaining a **low queue length** and a high number of IOPS available to the volume.
-   **Supports EBS Multi-attach** (not supported by other types)
-   **io1** or **io2**
    -   Storage: **4 GB - 16 TB**
    -   Max IOPS: **64,000 for Nitro EC2 instances** & **32,000 for non-Nitro**
    -   **50 lOPS per GB** (64,000 IOPS at 1,280 GB)
    -   io2 have more durability and more IOPS per GB (at the same price as io1)
-   **io2 Block Express**
    -   Storage: 4 GiB - **64 TB**
    -   Sub-millisecond latency
    -   Max IOPS: 256,000
    -   1000 lOPS per GB

#### Hard Disk Drives (HDD)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#hard-disk-drives-hdd "Permanent link")

-   Optimized for **Throughput-intensive Applications** that require **large & sequential IO operations** and are less sensitive to increased I/O latency (big data, data warehousing, log processing)
-   Maintain high throughput to HDD-backed volumes by maintaining a **high queue length** when performing large, sequential I/O
-   **Cannot be used as boot volume** for an EC2 instance
-   Storage: 125 MB - 16 TB
-   **Throughput Optimized HDD (st1)**
    -   Optimized for large sequential reads and writes (Big Data, Data Warehouses, Log Processing)
    -   **Max throughput: 500 MB/s**
    -   **Max IOPS: 500**
-   **Cold HDD (sc1)**
    -   For infrequently accessed data
    -   Cheapest
    -   **Max throughput: 250 MB/s**
    -   **Max IOPS: 250**

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#encryption "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   Optional
-   For Encrypted EBS volumes
    -   Data at rest is encrypted
    -   **Data in-flight between the instance and the volume is encrypted**
    -   All snapshots are encrypted
    -   All volumes created from the snapshot are encrypted
-   Encrypt an un-encrypted EBS volume
    -   Create an EBS snapshot of the volume
    -   Copy the EBS snapshot and encrypt the new copy
    -   Create a new EBS volume from the encrypted snapshot (the volume will be automatically encrypted)

> All EBS types and all instance families support encryption but not all instance types support encryption.

Snapshots[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#snapshots "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------

-   **Data Lifecycle Manager (DLM)** can be used to automate the creation, retention, and deletion of snapshots of EBS volumes
-   Snapshots are incremental
-   Only the most recent snapshot is required to restore the volume

RAID[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20block%20storage%20(ebs)/#raid "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   **RAID 0**
    -   Improve performance of a storage volume by distributing reads & writes in a stripe across attached volumes
    -   If you add a storage volume, you get the straight addition of throughput and IOPS
    -   For high performance applications
-   **RAID 1**
    -   Improve data availability by mirroring data in multiple volumes
    -   For critical applications

Elastic File System (EFS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20file%20system%20(efs)/#elastic-file-system-efs "Permanent link")
===============================================================================================================================================================================

-   AWS managed Network File System (NFS)
-   Can be mounted to multiple EC2 instances **across AZs**
-   **Pay per use** (no capacity provisioning)
-   **Auto scaling** (up to PBs)
-   Compatible with **Linux** based AMIs (**POSIX** file system)
-   **Uses security group to control access to EFS**
-   Lifecycle management feature to move files to **EFS-IA** after N days

Performance Mode[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20file%20system%20(efs)/#performance-mode "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **General Purpose** (default)
    -   latency-sensitive use cases (web server, CMS, etc.)
-   **Max I/O**
    -   higher latency & throughput (big data, media processing)

Throughput Mode[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20file%20system%20(efs)/#throughput-mode "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Bursting** (default)
    -   Throughput: 50MB/s per TB
    -   Burst of up to 100MB/s.
-   **Provisioned**
    -   Fixed throughput (provisioned)

Storage Tiers[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20file%20system%20(efs)/#storage-tiers "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Standard** - for frequently accessed files
-   **Infrequent access (EFS-IA)** - cost to retrieve files, lower price to store

Security[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20file%20system%20(efs)/#security "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

-   **EFS Security Groups** to control network traffic
-   **POSIX Permissions** to control access from hosts by IAM User or Group




Simple Storage Service (S3)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#simple-storage-service-s3 "Permanent link")
=====================================================================================================================================================================================

Intro[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#intro "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------

-   Global Service
-   Object store (key-value pairs)
-   Buckets must have a globally unique name
-   **Buckets are defined at the regional level**
-   Objects have a key (full path to the object): `s3://my_bucket/my_folder/another_folder/my_file.txt`
-   The key is composed of bucket + *prefix* + **object name** s3://my_bucket */my_folder/another_folder/* **my_file.txt**
-   There's no concept of directories within buckets (just keys with very long names that contain slashes)
-   **Max Object Size: 5TB**
-   Durability: 99.999999999% (total 11 9's)
-   **SYNC** command can be used to **copy data between buckets**, possibly in **different regions**

> -   S3 delivers **strong read-after-write consistency** (if an object is overwritten and immediately read, S3 always returns the latest version of the object)
> -   S3 is strongly consistent for all GET, PUT and LIST operations

Bucket Versioning[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#bucket-versioning "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Enabled at the bucket level
-   Protects against unintended deletes
-   Ability to restore to a previous version
-   Any file that is not versioned prior to enabling versioning will have version "null"
-   Suspending versioning does not delete the previous versions, just disables it for the future
-   To restore a deleted object, delete it's "delete marker"

> -   Versioning can only be suspended once it has been enabled.
> -   Once you version-enable a bucket, it can never return to an unversioned state.

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#encryption "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   Can be enabled at the bucket level or at the object level
-   **Server Side Encryption (SSE)**
    -   **SSE-S3**
        -   Keys managed by S3
        -   AES-256 encryption
        -   HTTP or HTTPS can be used
        -   Must set header: `"x-amz-server-side-encryption": "AES256"`
    -   **SSE-KMS**
        -   Keys managed by KMS
        -   HTTP or HTTPS can be used
        -   KMS provides control over who has access to what keys as well as audit trails
        -   Must set header: `"x-amz-server-side-encryption": "aws:kms"`
    -   **SSE-C**
        -   Keys managed by the client
        -   Client sends the key in HTTPS headers for encryption/decryption (S3 discards the key after the operation)
        -   **HTTPS must be used** as key (secret) is being transferred
-   **Client Side Encryption**
    -   Keys managed by the client
    -   Client encrypts the object before sending it to S3 and decrypts it after retrieving it from S3

Enforcing Encryption

Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#access-management "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **User based security**
    -   IAM policies define which API calls should be allowed for a specific user
    -   Preferred over bucket policy for **fine-grained access control**
-   **Resource based security (Bucket Policy)**
    -   Grant public access to the bucket
    -   Force objects to be encrypted at upload
    -   Cross-account access
    -   Object Access Control List (ACL) - applies to the objects while uploading
    -   Bucket Access Control List (ACL) - access policy that applies to the bucket

> An IAM principal can access an S3 object if the IAM permission allows it or the bucket policy allows it and there is no explicit deny.
>
> By default, an S3 object is owned by the account that uploaded it even if the bucket is owned by another account. To get full access to the object, the object owner must explicitly grant the bucket owner access. As a bucket owner, you can create a bucket policy to require external users to grant `bucket-owner-full-control` when uploading objects so the bucket owner can have full access to the objects.

S3 Static Websites[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#s3-static-websites "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Host static websites (may contain **client-side scripts**) and have them accessible on the public internet over **HTTP only** (for HTTPS, use [CloudFront](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFront) with S3 bucket as the origin)
-   The website URL will be either of the following:
    -   `<bucket-name>.s3-website-<region>.amazonaws.com`
    -   `<bucket-name>.s3-website.<region>.amazonaws.com`
-   If you get a `403 (Forbidden)` error, make sure the bucket policy allows public reads
-   For cross-origin access to the S3 bucket, we need to enable [CORS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#cross-origin-resource-sharing-cors) on the bucket
    -   ![attachments/Pasted image 20220507175558.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507175558.jpg)
-   To host an S3 static website on a custom domain using Route 53, the bucket name should be the same as your domain or subdomain Ex. for subdomain `portal.tutorialsdojo.com`, the name of the bucket must be `portal.tutorialsdojo.com`

MFA Delete[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#mfa-delete "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   MFA required to
    -   permanently delete an object version
    -   suspend versioning on the bucket
-   **Bucket Versioning must be enabled**
-   Can only be enabled or disabled by the root user

Server Access Logging[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#server-access-logging "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Most detailed way of logging access to S3 buckets (better than [CloudTrail](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudTrail))
-   Does not support **Data Events** & **Log File Validation** (use [CloudTrail](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudTrail) for that)
-   Store S3 access logs into another bucket
-   Logging bucket should not be the same as monitored bucket (logging loop)

Replication[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#replication "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Asynchronous replication**
-   Objects are replicated with the **same version ID**
-   Supports **cross-region** and **cross-account** replication
-   **Versioning must be enabled for source and destination buckets**
-   For DELETE operations:
    -   Replicate delete markers from source to target (optional)
    -   Permanent deletes are not replicated
-   There is **no chaining of replication**. So, if bucket 1 has replication into bucket 2, which has replication into bucket 3. Then objects created in bucket 1 are not replicated to bucket 3.

Pre-signed URL[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#pre-signed-url "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Pre-signed URLs for S3 have temporary access token as query string parameters which allow anyone with the URL to temporarily access the resource before the URL expires (default 1h)
-   Pre-signed URLs inherit the permission of the user who generated it
-   Uses:
    -   Allow only logged-in users to download a premium video
    -   Allow users to upload files to a precise location in the bucket

Storage Classes[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#storage-classes "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Data can be transitioned between storage classes manually or automatically using lifecycle rules
-   Data can be put directly into any storage class
-   **Standard**
    -   **99.99% availability**
    -   Most expensive
    -   Instant retrieval
    -   No cost on retrieval (only storage cost)
    -   For frequently accessed data
-   **Infrequent Access**
    -   For data that is infrequently accessed, but requires rapid access when needed
    -   Lower storage cost than Standard but **cost on retrieval**
    -   Can **move data into IA from Standard only after 30 days**
    -   Two types:
        -   **Standard IA**
            -   **99.9% Availability**
        -   **One-Zone IA**
            -   **99.5% Availability**
            -   Data is lost if AZ fails
            -   Storage for infrequently accessed data that can be easily recreated
-   **Glacier**
    -   For data archival
    -   Cost for storage and retrieval
    -   **Can move data into Glacier from Standard anytime**
    -   Objects cannot be directly accessed, they first need to be restored which could take some time (depending on the tier) to fetch the object.
    -   **Default encryption for data at rest and in-transit**
    -   Three types:
        -   **Glacier Instant Retrieval**
            -   **99.9% availability**
            -   Millisecond retrieval
            -   Minimum storage duration of **90 days**
            -   Great for data accessed once a quarter
        -   **Glacier Flexible Retrieval**
            -   **99.99% availability**
            -   3 retrieval flexibility (decreasing order of cost):
                -   Expedited (1 to 5 minutes)
                    -   Can **provision retrieval capacity** for reliability
                    -   Without provisioned capacity expedited retrievals might be rejected in situations of high demand
                -   Standard (3 to 5 hours)
                -   Bulk (5 to 12 hours)
            -   Minimum storage duration of **90 days**
        -   **Glacier Deep Archive**
            -   **99.99% availability**
            -   2 flexible retrieval:
                -   Standard (12 hours)
                -   Bulk (48 hours)
            -   Minimum storage duration of **180 days**
            -   Lowest cost
-   **Intelligent Tiering**
    -   **99.9% availability**
    -   Moves objects automatically between Access Tiers based on usage
    -   Small monthly monitoring and auto-tiering fee
    -   **No retrieval charges**
-   #### Moving between Storage Classes[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#moving-between-storage-classes "Permanent link")

    -   In the diagram below, transition can only happen in the downward direction
    -   ![attachments/Pasted image 20220514201314.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220514201314.jpg)

Lifecycle Rules[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#lifecycle-rules "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to automate transition or expiration actions on S3 objects
-   **Transition Action** (transitioned to another storage class)
-   **Expiration Action** (delete objects after some time)
    -   delete a version of an object
    -   delete incomplete multi-part uploads
-   Lifecycle Rules can be created for a prefix (ex `s3://mybucket/mp3/*`) or objects tags (ex Department: Finance)

> -   When you apply a retention period to an object version explicitly, you specify a `Retain Until Date` for the object version
> -   When you use bucket default settings, you don't specify a `Retain Until Date`. Instead, you specify a duration, for which every object version placed in the bucket should be protected.
> -   Different versions of a single object can have different retention modes and periods

S3 Analytics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#s3-analytics "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------

-   Provides analytics to determine when to transition data into different storage classes
-   **Does not work for ONEZONE_IA & GLACIER**

Performance[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#performance "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   3,500 PUT/COPY/POST/DELETE and 5,500 GET/HEAD requests per second per prefix
-   Recommended to spread data across prefixes for maximum performance
-   SSE-KMS may create bottleneck in S3 performance
-   Performance Optimizations
    -   **Multi-part Upload**
        -   parallelizes upload
        -   **recommended for files > 100MB**
        -   **must use for files > 5GB**
    -   **Byte-range fetches**
        -   Parallelize download requests by fetching specific byte ranges in each request
        -   Better resilience in case of failures since we only need to refetch the failed byte range and not the whole file
    -   **S3 Transfer Acceleration**
        -   Speed up **upload and download** for **large objects (>1GB)** for **global users**
        -   Data is ingested at the nearest edge location and is transferred over AWS private network (uses [CloudFront](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFront) internally)

S3 Select[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#s3-select "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------

-   Select a subset of data from S3 using **SQL queries** (**server-side filtering**)
-   Less network cost
-   Less CPU cost on the client-side

Data Transfer Costs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#data-transfer-costs "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Uploads to S3 are free
-   Downloads from S3 are paid
-   Using S3 Transfer Acceleration, you pay only for transfers that are accelerated
-   Since buckets are defined within a region, **data transfer within a region is free**

S3 Notification Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#s3-notification-events "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Optional
-   Generates events for operations performed on the bucket or objects
-   Object name filtering using prefix and suffix matching
-   **For the same combination of prefix and event type, we can only have one event rule.** Example: we can send S3 notification for object created at `/files` to only one destination (single rule).
-   Targets
    -   SNS topics
    -   **SQS Standard** queues (not FIFO queues)
    -   Lambda functions

Requester Pays Buckets[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#requester-pays-buckets "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Requester pays the cost of the request and the data downloaded from the bucket. The bucket owner only pays for the storage.
-   Used to share large datasets with other AWS accounts
-   The requester must be authenticated in AWS (cannot be anonymous)

Object Lock[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#object-lock "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   WORM (Write Once Read Many) model
-   Block an object version modification or deletion for a specified amount of time
-   Modes:
    -   **Governance mode**
        -   Only users with special permissions can overwrite or delete the object version or alter its lock settings
    -   **Compliance mode**
        -   A protected object version cannot be overwritten or deleted by any user, including the root user
        -   The object's retention mode can't be changed, and the retention period can't be shortened

#### Glacier Vault Lock[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20storage%20service%20(s3)/#glacier-vault-lock "Permanent link")

-   WORM (Write Once Read Many) model for Glacier
-   For compliance and data retention



Relational Database Service (RDS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#relational-database-service-rds "Permanent link")
=======================================================================================================================================================================================================

-   Regional Service
-   Supports Multi AZ
-   AWS Managed SQL Database
-   Supported Engines
    -   Postgres
    -   MySQL
    -   MariaDB
    -   Oracle
    -   Microsoft SQL Server
    -   Aurora (AWS Proprietary database)
-   Backed by [Elastic Compute Cloud (EC2)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Compute%20Cloud%20(EC2)) storage
-   We don't have access to the underlying instance
-   **DB connection is made on port 3306**
-   Security Groups are used for network security (must allow incoming TCP traffic on port 3306 from specific IPs)

Backups[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#backups "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   **Automated Backups** (enabled by default)
    -   Daily full backup of the database (during the defined maintenance window)
    -   Backup retention: 7 days (max 35 days)
    -   Transaction logs are backed-up every **5 minutes** (point in time recovery)
-   **DB Snapshots**:
    -   Manually triggered
    -   Backup retention: unlimited

Auto Scaling[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#auto-scaling "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Automatically scales the RDS storage within the max limit
-   Condition for automatic storage scaling:
    -   Free storage is less than 10% of allocated storage
    -   Low-storage lasts at least 5 minutes
    -   6 hours have passed since last modification

Read Replicas[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#read-replicas "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Allows us to scale the read operation (SELECT) on RDS
    -   ![attachments/Pasted image 20220507005920.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507005920.jpg)
-   **Up to 5 read replicas** (within AZ, cross AZ or cross region)
-   **Asynchronous Replication** (seconds)
-   **Replicas can be promoted to their own DB**
-   **Applications must update the connection string to leverage read replicas**
-   Network fee for replication
    -   Same region: free
    -   Cross region: paid

> You can create a read replica as a Multi-AZ DB instance. A standby of the replica will be created in another AZ for failover support for the replica.

Multi AZ[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#multi-az "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   Increase availability of the RDS database by replicating it to another AZ
    -   ![attachments/Pasted image 20220507010002.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507010002.jpg)
-   **Synchronous Replication**
-   **Connection string does not require to be updated** (both the databases can be accessed by one DNS name, which allows for automatic DNS failover to standby database)
-   When failing over, **RDS flips the CNAME** record for the DB instance to point at the standby, which is in turn promoted to become the new primary.
-   **Cannot be used for scaling as the standby database cannot take read/write operation**

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#encryption "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   **At rest encryption**
    -   KMS AES-256 encryption
    -   Encrypted DB => Encrypted Snapshots, Encrypted Replicas and vice versa
-   **In flight encryption**
    -   **SSL certificates**
    -   Force all connections to your DB instance to use SSL by setting the `rds.force_ssl` parameter to `true`
    -   To enable encryption in transit, download the **AWS-provided root certificates** & used them when connecting to DB
-   To encrypt an un-encrypted RDS database:
    -   Create a snapshot of the un-encrypted database
    -   Copy the snapshot and enable encryption for the snapshot
    -   Restore the database from the encrypted snapshot
    -   Migrate applications to the new database, and delete the old database
-   To create an encrypted cross-region read replica from a non-encrypted master:
    -   Encrypt a snapshot from the unencrypted master DB instance
    -   Create a new encrypted master DB instance
    -   Create an encrypted cross-region Read Replica from the new encrypted master

Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#access-management "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Username and Password can be used to login into the database
-   EC2 instances & [Lambda](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Lambda) functions should access the DB using **IAM DB Authentication** (**AWSAuthenticationPlugin** with **IAM**) - token based access
    -   EC2 instance or Lambda function has an IAM role which allows is to make an API call to the RDS service to get the **auth token** which it uses to access the MySQL database.
        -   ![attachments/Pasted image 20220507011632.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507011632.jpg)
    -   Only works with **MySQL** and **PostgreSQL**
    -   Auth token is valid for 15 mins
    -   Network traffic is encrypted in-flight using SSL
    -   **Central access management using IAM** (instead of doing it for each DB individually)
-   EC2 & Lambda can also get DB credentials from [SSM Parameter Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/SSM%20Parameter%20Store) to authenticate to the DB - credentials based access

RDS Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#rds-events "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   RDS events only provide operational events on the DB instance (not the data)
-   To capture data modification events, use **native functions** or **stored procedures** to invoke a **Lambda** function.

Monitoring[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#monitoring "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   **CloudWatch Metrics for RDS**
    -   Gathers metrics from the **hypervisor** of the DB instance
        -   CPU Utilization
        -   Database Connections
        -   Freeable Memory
-   **Enhanced Monitoring**
    -   Gathers metrics from an agent running on the RDS instance
        -   OS processes
        -   RDS child processes
    -   Used to monitor different **processes or threads on a DB instance** (ex. percentage of the CPU bandwidth and total memory consumed by each database process in your RDS instance

Maintenance & Upgrade[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/relational%20database%20service%20(rds)/#maintenance-upgrade "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Any database engine level upgrade for an RDS DB instance with Multi-AZ deployment triggers both the primary and standby DB instances to be upgraded at the same time. This causes **downtime** until the upgrade is complete. This is why it should be done during the maintenance window.



Aurora[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#aurora "Permanent link")
==================================================================================================================

-   Regional Service (supports global databases)
-   Supports Multi AZ
-   AWS managed Relational DB cluster
-   Preferred over [Relational Database Service (RDS)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Relational%20Database%20Service%20(RDS))
-   Auto-scaling (max 128TB)
-   Up to 15 read replicas
-   **Asynchronous Replication** (milliseconds)
-   **Supports only MySQL & PostgreSQL**
-   Cloud-optimized (5x performance improvement over MySQL on RDS, over 3x the performance of PostgreSQL on RDS)
-   **Backtrack**: restore data at any point of time without taking backups

Endpoints[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#endpoints "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   **Writer Endpoint** (Cluster Endpoint)
    -   Always points to the master (can be used for read/write)
    -   Each Aurora DB cluster has one cluster endpoint
-   **Reader Endpoint**
    -   Provides load-balancing for read replicas only (used to read only)
    -   If the cluster has no read replica, it points to master (can be used to read/write)
    -   Each Aurora DB cluster has one reader endpoint
-   **Custom Endpoint**:
    -   Used to point to a subset of replicas
    -   Provides load-balanced based on criteria other than the read-only or read-write capability of the DB instances like instance class (ex, direct internal users to low-capacity instances and direct production traffic to high-capacity instances)

High Availability & Read Scaling[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#high-availability-read-scaling "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Self healing (if some data is corrupted, it will be automatically healed)
-   Storage is striped across 100s of volumes (more resilient)
-   **Automated failover**
    -   A read replica is promoted as the new master in less than 30 seconds
    -   Aurora flips the **CNAME** record for your DB Instance to point at the healthy replica
    -   In case **no replica** is available, Aurora will attempt to **create a new DB Instance** in the **same AZ** as the original instance. This replacement of the original instance is done on a **best-effort basis** and may not succeed.
-   Support for **Cross Region Replication**
-   Aurora maintains 6 copies of your data across 3 AZ:
    -   4 copies out of 6 needed for writes (can still write if 1 AZ completely fails)
    -   3 copies out of 6 need for reads

> Each Read Replica is associated with a priority tier (0-15). In the event of a failover, Amazon Aurora will promote the Read Replica that has the highest priority (lowest tier). If two or more Aurora Replicas share the same tier, then Aurora promotes the replica that is largest in size. If two or more Aurora Replicas share the same priority and size, then Aurora promotes an arbitrary replica in the same promotion tier.

Encryption & Network Security[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#encryption-network-security "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Encryption at rest using KMS (same as RDS)
-   Encryption in flight using SSL (same as RDS)
-   You can't SSH into Aurora instances (same as RDS)
-   Network Security is managed using Security Groups (same as RDS)
-   EC2 instances should access the DB using [IAM DB Authentication]] but they can also do it using credentials fetched from the [[SSM Parameter Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Relational%20Database%20Service%20(RDS)#access-management) (same as RDS)

Aurora Serverless[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#aurora-serverless "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------

-   Optional
-   Automated database instantiation and auto scaling based on usage
-   Good for unpredictable workloads
-   No capacity planning needed
-   Pay per second

Aurora Multi-Master[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#aurora-multi-master "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------

-   Optional
-   Every node (replica) in the cluster can read and write
-   Used for immediate failover for write node (high availability in terms of write). If disabled and the master node fails, need to promote a Read Replica as the new master (will take some time).
-   **Client needs to have multiple DB connections for failover**

Aurora Global Database[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#aurora-global-database "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------

-   Entire database is replicated across regions to recover from region failure
-   Designed for **globally distributed applications** with **low latency local reads** in each region
-   1 Primary Region (read / write)
-   Up to 5 secondary (read-only) regions (replication lag < 1 second)
-   Up to 16 Read Replicas per secondary region
-   Helps for decreasing latency for clients in other geographical locations
-   **RTO of less than 1 minute** (to promote another region as primary)

Aurora Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aurora/#aurora-events "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------

-   Invoke a **Lambda** function from an **Aurora MySQL-compatible DB cluster** with a **native function** or a **stored procedure** (same as [RDS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Relational%20Database%20Service%20(RDS)#rds-events))
-   Used to capture data changes whenever a row is modified




DynamoDB[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/dynamodb/#dynamodb "Permanent link")
========================================================================================================================

-   Serverless NoSQL DB with multi-AZ
-   Distributed Database
-   Not an in-memory database (uses storage devices)
-   Storage auto-scaling
-   **Single digit millisecond** response time at any scale
-   **Maximum size of an item: 400 KB**
-   Primary key (must be decided at creation) can be a single field or a pair of fields (partition key and sort key)
-   Indexes allow us to query on attributes other than the Primary Key
-   Supports TTL (automatically delete an item after an expiry timestamp)
-   Supports **Transactions** (either write to multiple tables or write to none)

Capacity[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/dynamodb/#capacity "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   **Provisioned Mode** (default)
    -   Provision read & write capacity
    -   Pay for the provisioned capacity
    -   Auto-scaling option (eg. set RCU and WCU to 80% and the capacities will be scaled automatically based on the workload)
-   **On-demand Mode**
    -   Capacity auto-scaling based on the workload
    -   Pay for what you use (more expensive)
    -   Great for unpredictable workloads

DynamoDB Accelerator (DAX)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/dynamodb/#dynamodb-accelerator-dax "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Caches the queries and scans of DynamoDB items
-   Solves read congestion (`ProvisionedThroughputExceededException`)
-   **Microseconds latency for cached data**
-   Doesn't require application code changes
-   5 minutes TTL for cache (default)

DynamoDB Streams[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/dynamodb/#dynamodb-streams "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------

-   Ordered stream of notifications of item-level modifications (create/update/delete) in a table
-   Destination can be
    -   Kinesis Data Streams
    -   AWS Lambda
    -   Kinesis Client Library applications
-   Data Retention for up to 24 hours

Global Tables[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/dynamodb/#global-tables "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------

-   For low latency access in multiple-regions
-   Applications can READ and WRITE to the table in any region and the change will automatically be replicated to other tables (**active-active cross-region replication**)
-   **Must enable DynamoDB Streams as a pre-requisite**


ElastiCache[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elasticache/#elasticache "Permanent link")
=================================================================================================================================

-   Regional Service
-   AWS managed caching service
-   **In-memory key-value store** with **sub-millisecond latency**
-   Need to provision an underlying EC2 instance
-   **Makes the application stateless** because it doesn't have to cache locally
-   **Using ElastiCache requires heavy application code changes** (setup the application to query the cache before and after querying the database)
-   Usage:
    -   **DB Cache** (lazy loading): cache read operations on a database (reduced latency)
    -   **Session Store**: store user's session data like cart info (allows the application to remain stateless)
    -   **Global Data Store**: store intermediate computation results

Redis vs Memcached[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elasticache/#redis-vs-memcached "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

| Redis | Memcached |
| --- | --- |
| In-memory data store | **Distributed** memory object cache |
| Read Replicas (for scaling reads & HA) | No replication |
| Backup & restore | No backup & restore |
| **Single-threaded** | **Multi-threaded** |
| **HIPAA compliant** | **Not HIPAA compliant** |
| Data is stored in an in-memory DB which is replicated | Data is partitioned across multiple nodes (sharding) |
| **Redis Sorted Sets** are used in realtime Gaming Leaderboards |  |
| Good for auto-completion |  |
| Multi-AZ support with automatic failover (disaster recovery) |  |

Security & Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elasticache/#security-access-management "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Network security is managed using **Security Groups** (only allow EC2 security group for incoming requests)
-   At rest encryption using KMS
-   In-flight encryption using SSL
-   Use **Redis Auth** to authenticate to ElastiCache for Redis
-   Memcached supports SASL-based authentication


FSx[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/fsx/#fsx "Permanent link")
=========================================================================================================

-   Allows us to launch **3rd party high-performance file systems** on AWS
-   Useful when we don't want to use an AWS managed file system like S3
-   **Can be accessed from your on-premise infrastructure**

FSx for Windows[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/fsx/#fsx-for-windows "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------

-   Shared File System for Windows (like EFS but for Windows)
-   Supports **SMB** protocol, Windows **NTFS**, Microsoft **Active Directory** integration, ACLs, user quotas
-   Built on SSD, scale up to 10s of GB/s, millions of IOPS, 100s PB of data
-   Supports Multi-AZ (high availability)
-   Data is backed-up daily to S3
-   **Does not integrate with S3** (cannot store cold data)

FSx for Lustre[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/fsx/#fsx-for-lustre "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------

-   Parallel distributed file system for **HPC** (like EFS but for HPC)
-   Scales up to 100s GB/s, millions of IOPS, sub-ms latencies
-   **Only works with Linux**
-   **Seamless integration with S3**
    -   Can read S3 buckets as a file system (through FSx)
    -   Can write the output back to S3 (through FSx)
-   Ability to both process the **hot data** in a parallel and distributed fashion as well as easily store the **cold data** on Amazon S3

FSx Deployment Options[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/fsx/#fsx-deployment-options "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

-   **Scratch File System**
    -   Temporary storage (cheaper)
    -   Data is not replicated (data lost if the file server fails)
    -   High burst (6x faster than persistent file system)
    -   Usage: short-term processing
-   **Persistent File System**
    -   Long-term storage (expensive)
    -   Data is replicated within same AZ
    -   Failed files are replaced within minutes
    -   Usage: long-term processing, sensitive data



Redshift[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/redshift/#redshift "Permanent link")
========================================================================================================================

-   AWS managed **data warehouse** (10x better performance than other data warehouses)
-   Based on **PostgreSQL**
-   Used for **Online Analytical Processing (OLAP)** and high performance querying
-   **Columnar storage** of data with **massively parallel query execution** in **SQL**
-   Faster querying than [Athena](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Athena) due to indexes
-   Can be used for both long complex queries as well as short fast queries
-   Need to provision instances as a part of the Redshift cluster (pay for the instances provisioned)
-   Integrated with **Business Intelligence (BI) tools** such as **QuickSight** or **Tableau**
-   Redshift Cluster can have **1 to 128 nodes (128TB per node)**
    -   **Leader Node**: query planning & result aggregation
    -   **Compute Nodes**: execute queries & send the result to leader node
-   **No multi-AZ support** (all the nodes will be in the same AZ)
-   Auto-healing feature

Loading data into Redshift[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/redshift/#loading-data-into-redshift "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **S3**
    -   Use **COPY command** to load data from an S3 bucket into Redshift
    -   **Without Enhanced VPC Routing**
        -   data goes through the public internet
    -   **Enhanced VPC Routing**
        -   data goes through the VPC without traversing the public internet
-   **Kinesis Data Firehose**
    -   **Sends data to S3** and issues a **COPY** command to load it into Redshift
-   **EC2 Instance**
    -   Using **JDBC driver**
    -   Used when an application needs to write data to Redshift
    -   Optimal to write data in batches

Snapshots[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/redshift/#snapshots "Permanent link")
--------------------------------------------------------------------------------------------------------------------------

-   Stored internally in **S3**
-   **Incremental** (only changes are saved)
-   Can be restored into a new Redshift cluster
-   Automated
    -   based on a schedule or storage size (every 5 GB)
    -   set retention
-   Manual
    -   retains until you delete them
-   Feature to **automatically copy snapshots into another region**

Redshift Spectrum[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/redshift/#redshift-spectrum "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------

-   Query data present in S3 without loading it into Redshift
-   Need to have a Redshift cluster to use this feature
-   Query is executed by 1000s of Redshift Spectrum nodes
-   Consumes much less of your cluster's processing capacity than other queries
-   Diagram
    -   ![attachments/Pasted image 20220514110209.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220514110209.jpg)




Neptune[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/neptune/#neptune "Permanent link")
=====================================================================================================================

-   AWS managed **graph database**
-   Used for **high relationship data** (eg. social networking)
-   Highly available across **3 AZ** with up to **15 read replicas**
-   **Point-in-time recovery** due to continuous backup to S3
-   Support for KMS encryption at rest + HTTPS for in-flight encryption
-   **Need to provision nodes in advance** (pay for the provisioned nodes)



ElasticSearch[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elasticsearch/#elasticsearch "Permanent link")
=======================================================================================================================================

-   Used in combination with a database to perform **search operations on the database**
-   Can search on any field, even supports **partial matches**
-   **Need to provision a cluster of instances** (pay for provisioned instances)
-   Supports **Multi-AZ**
-   Used in Big Data
-   Comes with **Kibana** (visualization) & **Logstash** (log ingestion) - **ELK stack**
-   Integrated with [Cognito](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Cognito) for access control




Snow Family[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/snow%20family/#snow-family "Permanent link")
===================================================================================================================================

-   Offline data migration to [Simple Storage Service (S3)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3))
-   Used when it takes a long time to transfer data over the network
-   **Takes around 2 weeks to transfer the data**
-   **Snowball cannot import to Glacier directly** (transfer to S3, configure a lifecycle policy to transition the data into Glacier)
-   Pay per data transfer job
-   Hardware devices for
    -   Data Migration (between AWS & on-premise data center)
    -   Edge Computing
-   Need to install **OpsHub** software on your computer to manage Snow Family devices

Devices[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/snow%20family/#devices "Permanent link")
---------------------------------------------------------------------------------------------------------------------------

-   **Snowcone**
    -   2 CPUs, **4GB RAM**, wired or wireless access
    -   8 TB storage
    -   USB-C power using a cord or the optional battery
    -   Good for space-constrained environment
    -   **DataSync Agent** is preinstalled
    -   Does not support **Storage Clustering**
-   **Snowball Edge**
    -   **Compute Optimized**
        -   52 vCPUs, 208 GB of RAM
        -   42 TB storage
        -   **Optional GPU** (useful for video processing or machine learning)
        -   Supports **Storage Clustering**
    -   **Storage Optimized**
        -   Up to 40 CPUs, 80 GB of RAM
        -   80 TB storage
        -   Supports **Storage Clustering** (up to 15 nodes)
        -   Transfer up to petabytes
-   **Snowmobile**
    -   100 PB storage
    -   Used when transferring **> 10PB**
    -   Transfer up to exabytes
    -   Does not support **Storage Clustering**

Data Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/snow%20family/#data-migration "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   **Provides block storage and Amazon S3-compatible object storage**
-   Usage process
    1.  Request Snowball devices from the AWS console for delivery
    2.  **Install the snowball client / AWS OpsHub on your servers**
    3.  Connect the snowball to your servers and copy files using the client
    4.  Ship back the device when you're done (goes to the right AWS facility)
    5.  Data will be loaded into an S3 bucket
    6.  **Snowball is completely wiped**
-   Devices for data migration
    -   Snowcone
    -   Snowball Edge - Storage Optimized
    -   Snowmobile

Edge Computing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/snow%20family/#edge-computing "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   Process data while it's being created on an edge location (could be anything that doesn't have internet or access to cloud)
-   Long-term deployment options for reduced cost (1 and 3 years discounted pricing)
-   Devices for edge computing
    -   Snowcone
    -   Snowball Edge
-   Can run **EC2 Instances & AWS Lambda functions locally on Snow device** (using **AWS loT Greengrass**)


Database Migration Service (DMS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/database%20migration%20service%20(dms)/#database-migration-service-dms "Permanent link")
====================================================================================================================================================================================================

-   Migrate entire **databases** from on-premises to AWS cloud
-   The source database remains available during migration
-   **Continuous Data Replication** using **CDC (change data capture)**
-   Requires **EC2 instance running the DMS software** to perform the replication tasks. If the amount of data is large, use a large instance. If multi-AZ is enabled, need an instance in each AZ.

> Most resource-efficient way with least development and no management, to continuously replicate data to [Redshift](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Redshift) for analytics (first moves data to an S3 bucket and then to Redshift)
>
> DMS supports S3 as the source and **Kinesis** as the target, so data stored in an S3 bucket can be streamed to Kinesis. This also supports CDC to stream new data that is put in the S3 bucket.

Types of Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/database%20migration%20service%20(dms)/#types-of-migration "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Homogeneous Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/database%20migration%20service%20(dms)/#homogeneous-migration "Permanent link")

-   When the source and target DB engines are the same (eg. Oracle to Oracle)
-   One step process:
    -   Use the **Database Migration Service (DMS)** to migrate data from the source database to the target database

#### Heterogeneous Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/database%20migration%20service%20(dms)/#heterogeneous-migration "Permanent link")

-   When the source and target DB engines are different (eg. Microsoft SQL Server to Aurora)
-   Two step process:
    1.  Use the **Schema Conversion Tool (SCT)** to convert the source schema and code to match that of the target database
    2.  Use the **Database Migration Service (DMS)** to migrate data from the source database to the target database

Migrating using [Snow Family](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Snow%20Family)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/database%20migration%20service%20(dms)/#migrating-using-snow-family "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

1.  Use the Schema Conversion Tool (SCT) to extract the data locally and move it to the Edge device
2.  Ship the Edge device or devices back to AWS
3.  After AWS receives your shipment, the Edge device automatically loads its data into an Amazon S3 bucket.
4.  AWS DMS takes the files and migrates the data to the target data store (eg. DynamoDB)



Storage Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#storage-gateway "Permanent link")
===============================================================================================================================================

-   Bridge between on-premises data and [S3](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3)) for **Hybrid Cloud**
-   Not suitable for one-time sync of large amounts of data (use [DataSync](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/DataSync) instead)
-   Optimizes data transfer by sending only changed data

Types of Storage Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#types-of-storage-gateway "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

#### S3 File Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#s3-file-gateway "Permanent link")

-   Used to expand on-premise NFS by leveraging S3
-   Configured S3 buckets are accessible on premises using the **NFS** and **SMB** protocol
-   **Data is cached at the file gateway** for low latency access
-   Can be mounted on many servers on-premises
-   Integrated with **Active Directory (AD)** for user authentication
-   Diagram
    -   ![attachments/Pasted image 20220509131940.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509131940.jpg)

#### Volume Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#volume-gateway "Permanent link")

-   Used for on-premise storage volumes
-   Uses **iSCSI protocol**
-   Two kinds of volumes:
    -   **Cached volumes**: storage extension using S3 with caching at the volume gateway
    -   **Stored volumes**: entire dataset is on premise, scheduled backups to S3 as **EBS snapshots**
-   Diagram
    -   ![attachments/Pasted image 20220509132530.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509132530.jpg)

#### Tape Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#tape-gateway "Permanent link")

-   Used to backup on-premises data using tape-based process to S3 as Virtual Tapes
-   Uses **iSCSI protocol**
-   Diagram
    -   ![attachments/Pasted image 20220509132930.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509132930.jpg)

#### FSx File Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#fsx-file-gateway "Permanent link")

-   Used to expand on-premise Windows-based storage by leveraging FSx for Windows
-   Windows native compatibility (SMB, NTFS, Active Directory)
-   **Data is cached at the file gateway** for low latency access
-   Diagram
    -   ![attachments/Pasted image 20220509133356.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509133356.jpg)

Storage Gateway - Hardware Appliance[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/storage%20gateway/#storage-gateway-hardware-appliance "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Storage Gateway requires on-premises virtualization. If you don't have virtualization available, you can use a Storage Gateway - Hardware Appliance. It is a mini server that you need to install on-premises.
-   **Does not work with FSx File Gatway**



DataSync[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/datasync/#datasync "Permanent link")
========================================================================================================================

-   Move **large amounts of data** from your **on-premises NAS or file system** via **NFS** or **SMB** protocol to AWS over the **public internet using TLS**
-   Can synchronize to:
    -   S3 (all storage classes)
    -   EFS
    -   FSx for Windows
-   **Scheduled Replication** (not continuous)
-   Need to install **AWS DataSync Agent** on premises
-   Diagram
    -   ![attachments/Pasted image 20220513214950.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513214950.jpg)
-   Can also be used to transfer between two EFS in different regions
    -   ![attachments/Pasted image 20220513215131.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513215131.jpg)
-   Suitable in automating and accelerating online data transfers to a variety of AWS storage services (over [Storage Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Storage%20Gateway) which only works with S3)

> Perfect to move large amounts of historical data from on-premises to S3 Glacier Deep Archive (directly).


AppSync[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/appsync/#appsync "Permanent link")
=====================================================================================================================

-   Store and **sync data across mobile and web apps** in **real-time**
-   Makes use of **GraphQL** (mobile technology from Facebook)
-   **Offline data synchronization** (replaces Cognito Sync)



Transfer Family[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/transfer%20family/#transfer-family "Permanent link")
===============================================================================================================================================

-   AWS managed service to transfer files in and out of [Simple Storage Service (S3)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3)) using **FTP** (instead of using proprietary methods)
-   Supported Protocols
    -   **FTP** (File Transfer Protocol) - unencrypted in flight
    -   **FTPS** (File Transfer Protocol over SSL) - encrypted in flight
    -   **SFTP** (Secure File Transfer Protocol) - encrypted in flight
-   Supports Multi AZ
-   Pay per provisioned endpoint per hour + fee per GB data transfers
-   Clients can either connect directly to the FTP endpoint or optionally through Route 53
-   Transfer Family will need permission to read or put data into S3 or EFS


Route 53[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#route-53 "Permanent link")
==========================================================================================================================

-   Global Service
-   AWS managed **Authoritative DNS** (customer can update the DNS records and have full control over the [DNS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#dns))
-   Also a Domain Registrar (for registering domain names)
-   Only AWS service which provides 100% availability SLA
-   Affected by client's DNS caching (not suitable for [Blue-Green Deployment](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Blue-Green%20Deployment) if the client caches DNS queries)

> It is recommended to use DNS names or URLs instead of IPs wherever possible

Hosted Zone[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#hosted-zone "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------

-   A container for DNS records that define how to route traffic to a domain and its subdomains.
-   Hosted zone is queried to get the IP address from the hostname
-   Two types:
    -   **Public Hosted Zone**
        -   resolves public domain names
        -   can be queried by anyone on the internet
    -   **Private Hosted Zone**
        -   resolves private domain names
        -   can only be queried from within the VPC

Record Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#record-types "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------

-   **A** - maps a hostname to IPv4
-   **AAAA** - maps a hostname to IPv6
-   **CNAME** - maps a hostname to another hostname
    -   The target is a domain name which must have an A or AAAA record
    -   **Cannot point to root domains (Zone Apex)** Ex: you can't create a CNAME record for `example.com`, but you can create for `something.example.com`
-   **NS** (Name Servers) - controls how traffic is routed for a domain
-   **Alias** - maps a hostname to an AWS resource
    -   **AWS proprietary**
    -   Can point to root (zone apex) and non-root domains
    -   **Alias Record is of type A or AAAA** (IPv4 / IPv6)
    -   Targets can be
        -   Elastic Load Balancers
        -   CloudFront Distributions
        -   API Gateway
        -   Elastic Beanstalk environments
        -   S3 Websites
        -   VPC Interface Endpoints
        -   Global Accelerator accelerator
        -   Route 53 record in the same hosted zone
    -   **Target cannot be EC2**

Routing Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#routing-policies "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------

#### Simple[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#simple "Permanent link")

-   Route to one or more resources
-   If multiple values are returned, client chooses one at random (client-side load balancing)
-   No health check (if returning multiple resources, some of them might be unhealthy)
-   Image
    -   ![attachments/Pasted image 20220507122603.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507122603.jpg)

#### Weighted[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#weighted "Permanent link")

-   Route a fraction of request to multiple resources
-   Health checks
-   Use case: testing a new application version by sending a small amount of traffic
-   Can be used for **Active-Active failover** strategy

#### Latency-based[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#latency-based "Permanent link")

-   Redirect to the resource that has the lowest latency
-   Health checks
-   Can be used for **Active-Active failover** strategy

#### Failover[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#failover "Permanent link")

-   Primary & Secondary Records (if the primary application is down, route to secondary application)
-   Health check must be associated with the primary record
-   Used for **Active-Passive failover** strategy

#### Geolocation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#geolocation "Permanent link")

-   Routing based on the client's location
-   Should create a "Default" record (in case there's no match on location)
-   Use cases: restrict content distribution & language preference

#### Geoproximity[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#geoproximity "Permanent link")

-   Route traffic to your resources based on the proximity of clients to the resources
-   Ability to shift more traffic to resources based on the defined bias.
    -   To expand (bias: 1 to 99) → more traffic to the resource
    -   To shrink (bias: -1 to-99) → less traffic to the resource
-   Resources can be:
    -   AWS resources (specify AWS region)
    -   Non-AWS resources (specify Latitude and Longitude)
-   Uses **Route 53 Traffic Flow**

#### Multi-value[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#multi-value "Permanent link")

-   Route traffic to multiple resources (max 8)
-   Health Checks (only healthy resources will be returned)

Health Checks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#health-checks "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------

-   HTTP Health Checks are only for public resources
-   Allows for Automated DNS Failover
-   Three types:
    -   Monitor an endpoint (application or other AWS resource)
        -   Multiple global health checkers check the endpoint health
        -   Must configure the application firewall to allow incoming requests from the IPs of Route 53 Health Checkers
        -   Supported protocols: HTTP, HTTPS and TCP
    -   Monitor other health checks (**Calculated Health Checks**)
        -   Combine the results of multiple Health Checks into one (AND, OR, NOT)
        -   Specify how many of the health checks need to pass to make the parent pass
        -   Usage: perform maintenance to your website without causing all health checks to fail
    -   Monitor CloudWatch Alarms (to perform health check on private resources)
        -   Route 53 health checkers are outside the VPC. They can't access private endpoints (private VPC or on-premises resources).
        -   Create a CloudWatch Metric and associate a CloudWatch Alarm to it, then create a Health Check that checks the CW alarm.

GoDaddy with Route 53[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#godaddy-with-route-53 "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------

-   Use GoDaddy as registrar and Route 53 as DNS
    -   Once we register a hostname at GoDaddy, we need to update the name servers (NS) of GoDaddy to match the name servers of a public hosted zone created in Route 53. This way, GoDaddy will use Route 53's DNS.

DNS Resolution in Hybrid Cloud[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/route%2053/#dns-resolution-in-hybrid-cloud "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   To resolve DNS queries for resources in the VPC from the on-premises network, create an inbound endpoint on Route 53 Resolver and then DNS resolvers on the on-premises network can forward DNS queries to Route 53 Resolver via this endpoint.
-   To resolve DNS queries for resources in the on-premises network from the VPC, create an outbound endpoint on Route 53 Resolver and then Route 53 Resolver can conditionally forward queries to resolvers on the on-premises network via this endpoint. To conditionally forward queries, create Resolver rules that specify the domain names for the DNS queries that you want to forward (such as example.com) and the IP addresses of the DNS resolvers on the on-premises network that you want to forward the queries to.


API Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#api-gateway "Permanent link")
===================================================================================================================================

-   Serverless REST APIs
-   Invoke Lambda functions using REST APIs (API gateway will proxy the request to lambda)
-   Supports **WebSocket** (stateful)
-   Rate Limiting (throttle requests) - returns **429 Too Many Requests**
-   Cache API responses
-   Transform and validate requests and responses
-   **Can be integrated with any HTTP endpoint in the backend or any AWS API**

> -   We can use an API Gateway REST API to directly access a DynamoDB table by creating a proxy for the DynamoDB query API.
> -   API cache is not enabled for a method, it is enabled for a stage

Endpoint Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#endpoint-types "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   **Edge-Optimized** (default)
    -   For global clients
    -   Requests are routed through the [CloudFront](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFront) edge locations (improves latency)
    -   The API Gateway lives in only one region but it is accessible efficiently through edge locations
-   **Regional**
    -   For clients within the same region
    -   Could manually combine with your own CloudFront distribution for global deployment (this way you will have more control over the caching strategies and the distribution)
-   **Private**
    -   Can only be accessed within your VPC using an **Interface VPC endpoint** (ENI)
    -   Use resource policy to define access

Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#access-management "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

#### IAM Policy[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#iam-policy "Permanent link")

-   Create an IAM policy and attach to User or Role to allow it to call an API
-   Good to provide **access within your own AWS account**
-   Leverages **Sig v4** where lAM credential are in the request headers
-   Diagram
    -   ![attachments/Pasted image 20220510203344.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510203344.jpg)

#### Lambda Authorizer[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#lambda-authorizer "Permanent link")

-   Uses a Lambda function to validate the token being passed in the header and return an lAM policy to determine if the user should be allowed to access the resource.
-   Option to **cache result of authentication**
-   For **OAuth / SAML / 3rd party type of authentication**
-   Good to provide access outside your AWS account if you have an **existing IDP**
-   Diagram
    -   ![attachments/Pasted image 20220510203327.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510203327.jpg)

#### Cognito User Pools (CUP)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#cognito-user-pools-cup "Permanent link")

-   **Seamless integration with CUP** (no custom lambda implementation required)
-   **Only supports authentication** (authorization must be implemented in the backend)
-   The client (user) first authenticates with Cognito and gets the access token which it passes in the header to API gateway. API gateway validates the token using Cognito and then hits the backend if the token is valid.
-   Diagram
    -   ![attachments/Pasted image 20220510203756.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510203756.jpg)

Serverless CRUD Application[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/api%20gateway/#serverless-crud-application "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

![attachments/Pasted image 20220510201558.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510201558.jpg)



Virtual Private Cloud (VPC)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#virtual-private-cloud-vpc "Permanent link")
=====================================================================================================================================================================================

-   **Regional resource**
-   Soft limit of 5 VPCs per region
-   Only the Private IPv4 ranges are allowed

> New EC2 instances are launched into the default VPC if no subnet is specified

Classless Inter-Domain Routing (CIDR)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#classless-inter-domain-routing-cidr "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Way to define a range of IP addresses
    -   ![attachments/Pasted image 20220512094258.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512094258.jpg)
-   Two parts
    -   Base IP - 192.168.0.0
    -   Subnet Mask (defines how many bits are frozen from the left side) - /16
-   Private IP ranges:
    -   10.0.0.0 - 10.255.255.255 (10.0.0.0/8) ⇒ used in big networks (24 bits can change)
    -   172.16.0.0 - 172.31.255.255 (172.16.0.0/12) ⇒ AWS default VPC
    -   192.168.0.0 - 192.168.255.255 (192.168.0.0/16) ⇒ home networks
-   Rest of the IP ranges are Public
-   **Max 5 CIDR ver VPC**
    -   Min. size is /28 (16 IP addresses)
    -   Max. size is /16 (65536 IP addresses)

Subnets[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#subnets "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

-   Sub-ranges of IP addresses within the VPC
-   **Each subnet is bound to an AZ**
-   Subnets in a VPC cannot have overlapping CIDRs
-   **Default VPC only has public subnets** (1 public subnet per AZ, no private subnet)
-   **AWS reserves 5 IP addresses (first 4 & last 1) in each subnet**. These 5 IP addresses are not available for use. Example: if CIDR block 10.0.0.0/24, then reserved IP addresses are 10.0.0.0, 10.0.0.1, 10.0.0.2, 10.0.0.3 & 10.0.0.255

> To make the EC2 instances running in private subnets accessible on the internet, place them behind an internet-facing (running in public subnets) Elastic Load Balancer.
>
> **There is no concept of Public and Private subnets.** Public subnets are subnets that have: - "Auto-assign public IPv4 address" set to "Yes" - The subnet route table has an attached Internet Gateway
>
> This allows the resources within the subnet to make requests that go to the public internet. **A subnet is private by default.**
>
> Since the resources in a private subnet don't have public IPs, they need a NAT gateway for address translation to be able to make requests that go to the public internet. NAT gateway also prevents these private resources from being accessed from the internet.

Internet Gateway (IGW)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#internet-gateway-igw "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Allows resources in a VPC to connect to the Internet
    -   ![attachments/Pasted image 20220512100002.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512100002.jpg)
-   **Attached to the VPC**
-   Should be used to **connect public resources to the internet** (use NAT gateway for private resources since they need network address translation)
-   Route table of the public subnets must be edited to allow requests destined outside the VPC to be routed to the IGW
    -   ![attachments/Pasted image 20220512222218.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512222218.jpg)

> IGW performs network address translation (NAT) for a public EC2 instance

Bastion Hosts[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#bastion-hosts "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   A EC2 instance running in the public subnet (accessible from public internet), to allow users to SSH into the instances in the private subnet.
    -   ![attachments/Pasted image 20220512100455.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512100455.jpg)
-   Security groups of the private instances should only allow traffic from the bastion host.
-   Bastion host should only allow port 22 traffic from the IP address you need (**small instances are enough**)

#### High Availability[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#high-availability "Permanent link")

-   HA options for Bastion Host
    -   Run 2 Bastion Hosts across 2 AZ
    -   Run 1 Bastion Host across 2 AZ with ASG 1:1:1
-   Routing to the bastion host
    -   If 1 bastion host, use an elastic IP with EC2 user-data script to access it
    -   If 2 bastion hosts, use a public-facing NLB (layer 4) deployed in multiple AZ. Bastion hosts can live in the private subnet (more secure)
-   Can't use ALB as it works in layer 7 (HTTP protocol) and SSH works with TCP
-   Diagram
    -   ![attachments/Pasted image 20220513222559.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513222559.jpg)

Network Address Translation (NAT) Instance[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#network-address-translation-nat-instance "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   An [EC2](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Compute%20Cloud%20(EC2)) instance **launched in the public subnet** which performs network address translation to enable private instances to use the public IP of the NAT instance to access the internet. This is exactly the same as how routers perform NAT. This also prevents the private instances from being accessed from the public internet.
    -   ![attachments/Pasted image 20220512101152.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512101152.jpg)
-   **Must disable EC2 setting: source / destination IP check on the NAT instance** as the IPs can change.
-   **Must have an Elastic IP attached to it**
-   Route Tables for private subnets must be configured to route internet-destined traffic to the NAT instance (its elastic IP)
-   **Can be used as a Bastion Host**
-   Disadvantages
    -   Not highly available or resilient out of the box. Need to create an ASG in multi-AZ + resilient user-data script
    -   Internet traffic bandwidth depends on EC2 instance type
    -   You must manage [Security Groups](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Compute%20Cloud%20(EC2)#security-groups) & rules:
        -   Inbound:
            -   Allow HTTP / HTTPS traffic coming from Private Subnets
            -   Allow SSH from your home network (access is provided through Internet Gateway)
        -   Outbound:
            -   Allow HTTP / HTTPS traffic to the Internet
-   Architecture
    -   ![attachments/Pasted image 20220512101803.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512101803.jpg)

NAT Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#nat-gateway "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   AWS managed NAT with **bandwidth autoscaling** (up to 45Gbps)
-   Preferred over NAT instances
-   **Uses an Elastic IP** and Internet Gateway behind the scenes
-   **Created in a public subnet**
-   **Bound to an AZ**
-   **Cannot be used by EC2 instances in the same subnet** (only from other subnets)
-   **Cannot be used as a Bastion Host**
-   Route Tables for private subnets must be configured to route internet-destined traffic to the NAT gateway
    -   ![attachments/Pasted image 20220512222148.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512222148.jpg)
-   No Security Groups to manage
-   Pay per hour
-   Architecture
    -   ![attachments/Pasted image 20220512204306.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512204306.jpg)
-   High Availability
    -   Create NAT gateways in public subnets bound to different AZ all routing outbound connections to the IGW (attached to the VPC)
    -   No cross-AZ failover needed because if an AZ goes down, all of the instances in that AZ also go down.
    -   ![attachments/Pasted image 20220512204520.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512204520.jpg)

DNS Resolution in VPC[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#dns-resolution-in-vpc "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Two settings need to be enabled to allow DNS resolution within a VPC:
    -   **DNS Support** (enableDnsSupport)
        -   Allows the resources within the VPC to query the DNS provided by Route 53 Resolver
        -   **Enabled by default**
        -   If disabled, we need to provide a custom DNS server otherwise we won't be able to reach hostnames
        -   Diagram
            -   ![attachments/Pasted image 20220512210247.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512210247.jpg)
    -   **DNS Hostnames** (enableDnsHostnames)
        -   Assigns **public hostname** to EC2 instances in our VPC if they have a public IPv4
        -   **Doesn't work until `enableDnsSupport=true`**
        -   By default
            -   Default VPC - Enabled
            -   Custom VPC - Disabled
        -   When disabled, instances in the VPC will have a public IP but no public DNS
-   If you use custom domain names in a Private Hosted Zone in Route 53, you must enable both of these settings
    -   ![attachments/Pasted image 20220512210613.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512210613.jpg)

Network Access Control List (NACL)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#network-access-control-list-nacl "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   NACL is a firewall at the subnet level
-   One NACL per subnet but a NACL can be attached to multiple subnets
-   **New subnets are assigned the Default NACL**
-   **Default NACL allows all inbound & outbound requests**
    -   ![attachments/Pasted image 20220512215745.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512215745.jpg)
-   NACL Rules
    -   Based only on IP addresses
    -   Rules number: 1-32766 (lower number has higher precedence)
    -   First rule match will drive the decision
    -   The last rule denies the request (only when no previous rule matches)
-   NACL vs [Security Group](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Compute%20Cloud%20(EC2)#security-groups)
    -   NACL
        -   Firewall for subnets
        -   Supports both Allow and Deny rules
        -   Stateless (both request and response will be evaluated against the NACL rules)
        -   Only the first matched rule is considered
    -   Security Group:
        -   Firewall for EC2 instances
        -   Supports only Allow rules
        -   Stateful (only request will be evaluated against the SG rules)
        -   All rules are evaluated
    -   ![attachments/Pasted image 20220512220220.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512220220.jpg)
-   NACL with Ephemeral Ports
    -   In the example below, the client EC2 instance needs to connect to DB instance. Since the ephemeral port can be randomly assigned from a range of ports, the Web Subnets's NACL must allow inbound traffic from that range of ports and similarly DB Subnet's NACL must allow outbound traffic on the same range of ports.
    -   ![attachments/Pasted image 20220512220647.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512220647.jpg)

VPC Peering[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#vpc-peering "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   Connect two VPCs (could be in **different region or account**) using the AWS private network
    -   ![attachments/Pasted image 20220512221728.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512221728.jpg)
-   Participating VPCs must have **non-overlapping CIDR**
-   VPC Peering connection is **non-transitive** (A - B, B - C != A - C) because it works based on route-table rules.
-   Must update route tables in each VPC's subnets to ensure requests destined to the peered VPC can be routed through the peering connection
    -   ![attachments/Pasted image 20220512221946.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512221946.jpg)
    -   ![attachments/Pasted image 20220512221954.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512221954.jpg)
-   You can reference a security group in a peered VPC across account or region. This allows us to use SG instead of CIDR when configuring rules.

> VPC Peering does not facilitate centrally-managed VPC like [VPC Sharing](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Resource%20Access%20Manager%20(RAM)#vpc-sharing)

VPC Endpoints[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#vpc-endpoints "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Private endpoints** within your VPC that allow AWS services to privately connect to resources within your VPC without traversing the public internet (cheaper)
    -   ![attachments/Pasted image 20220512222517.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512222517.jpg)
-   Powered by **AWS PrivateLink**
-   **Route table is updated automatically**
-   **Bound to a region** (do not support inter-region communication)
-   Two types:
    -   **Interface Endpoint**
        -   Provisions an **ENI** (private IP) as an entry point per subnet
        -   Need to **attach a security group to the interface endpoint** to control access
        -   Supports most AWS services
    -   **Gateway Endpoint**
        -   Provisions a gateway
        -   Must be used as a target in a route table
        -   Supports only **S3** and **DynamoDB**

VPC Flow Logs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#vpc-flow-logs "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Captures information about **IP traffic** going into your **interfaces**
-   Three levels:
    -   **VPC** Flow Logs
    -   **Subnet** Flow Logs
    -   **ENI** Flow Logs
-   Can be configured to show accepted, rejected or all traffic
-   Flow logs data can be sent to **S3** (bulk analytics) or **CloudWatch Logs** (near real-time decision making)
-   Query VPC flow logs using **Athena** in S3 or **CloudWatch Logs Insights**

IPv6 Support[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#ipv6-support "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------

-   IPv4 cannot be disabled for your VPC
-   Enable IPv6 to operate in **dual-stack mode** in which your EC2 instances will get at least a **private IPv4** and a **public IPv6**. They can communicate using either IPv4 or IPv6 to the internet through an Internet Gateway.
    -   ![attachments/Pasted image 20220513005218.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513005218.jpg)
-   If you cannot launch an EC2 instance in your subnet, It's not because it cannot acquire an IPv6 (the space is very large). It's because there are no available IPv4 in your subnet. **Solution: Create a larger IPv4 CIDR for the subnet**

#### Egress-only Internet Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#egress-only-internet-gateway "Permanent link")

-   Allows instances in your VPC to initiate outbound connections over IPv6 while preventing inbound IPv6 connections to your private instances.
    -   ![attachments/Pasted image 20220513005755.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513005755.jpg)
-   Similar to [NAT Gateway](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Virtual%20Private%20Cloud%20(VPC)#nat-gateway) but for IPv6
-   Must update Route Tables

VPC Console Wizard[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/virtual%20private%20cloud%20(vpc)/#vpc-console-wizard "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

> -   Supported Configurations:
> -   VPC with a single public subnet
> -   VPC with public and private subnets (NAT)
> -   VPC with public and private subnets and AWS Site-to-Site VPN access
> -   VPC with a private subnet only and AWS Site-to-Site VPN access


PrivateLink[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/privatelink/#privatelink "Permanent link")
=================================================================================================================================

-   Used to expose **services** in one VPC to multiple other VPCs, possibly in **different accounts**
-   Should not use VPC peering as we only want to expose a few services
-   Requires a **NLB (common) or GWLB in the service VPC** and **ENI in the consumer VPC**
-   Use multi-AZ NLB and ENIs in multiple AZ for fault-tolerance

![attachments/Pasted image 20220512235655.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512235655.jpg)

Exposing ECS tasks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/privatelink/#exposing-ecs-tasks "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------

-   ECS tasks require an ALB. So, we can connect the ALB to the NLB for PrivateLink.
-   Corporate Data Centers will still connect through the VPN or Direct Connect.

![attachments/Pasted image 20220513000308.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513000308.jpg)



Site-to-Site VPN[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/site-to-site%20vpn/#site-to-site-vpn "Permanent link")
==================================================================================================================================================

-   Easiest and most cost-effective way to connect a VPC to an on-premise data center
-   **IPSec Encrypted** connection through the public internet
-   **Virtual Private Gateway (VGW)**: VPN concentrator on the VPC side of the VPN connection
-   **Customer Gateway (CGW)**: Software application or physical device on customer side of the VPN connection
-   If you need to ping EC2 instances from on-premises, make sure you add the **ICMP protocol** on the inbound rules of your security groups ![attachments/Pasted image 20220512224053.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512224053.jpg)

VPN CloudHub[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/site-to-site%20vpn/#vpn-cloudhub "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------

-   **Low-cost hub-and-spoke model** for **network connectivity between a VPC and multiple on-premise data centers**
-   Every participating network can communicate with one another through the VPN connection ![attachments/Pasted image 20220512224648.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512224648.jpg)


Direct Connect (DX)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/direct%20connect%20(dx)/#direct-connect-dx "Permanent link")
===========================================================================================================================================================

-   Dedicated private connection from an on-premise data center to a VPC
    -   ![attachments/Pasted image 20220512233459.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512233459.jpg)
-   **Data in transit is not-encrypted** but the connection is private (secure)
-   More stable and secure than Site-to-Site VPN
-   Access public & private resources on the same connection using **Public & Private Virtual Interface (VIF)** respectively
-   Connection to a data center is made from a **Direct Connect Location**
-   Connects to a Virtual Private Gateway (VGW) on the VPC end
-   Supports both IPv4 and IPv6
-   Supports **Hybrid Environments** (on premises + cloud)
-   **Lead time > 1 month**

Connection Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/direct%20connect%20(dx)/#connection-types "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Dedicated Connection**
    -   **1 Gbps and 10 Gbps** (fixed capacity)
    -   Physical ethernet port dedicated to a customer
-   **Hosted Connection**
    -   **50Mbps, 500 Mbps, up to 10 Gbps**
    -   **On-demand capacity scaling** (more flexible than dedicated connection)

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/direct%20connect%20(dx)/#encryption "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------

-   For encryption in flight, use AWS Direct Connect + VPN which provides an **IPsec-encrypted private connection**
    -   ![attachments/Pasted image 20220512234026.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512234026.jpg)
-   Good for an extra level of security

Resiliency[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/direct%20connect%20(dx)/#resiliency "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------

-   **Best way** (redundant direct connect connections)
    -   ![attachments/Pasted image 20220512234246.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512234246.jpg)
-   **Cost-effective way** (VPN connection as a backup)
    -   Implement an **IPSec VPN** connection and use the **same BGP prefix**. Both the Direct Connect connection and IPSec VPN are active and being advertised using the Border Gateway Protocol (BGP). The **Direct Connect link will always be preferred** unless it is unavailable.

Direct Connect Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/direct%20connect%20(dx)/#direct-connect-gateway "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to setup a Direct Connect to multiple VPCs, possibly in **different regions** but **same account**
-   Using DX, we will create a Private VIF to the Direct Connect Gateway which will extend the VIF to Virtual Private Gateways in multiple VPCs (possibly across regions).
    -   ![attachments/Pasted image 20220512234818.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512234818.jpg)




Transit Gateway[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/transit%20gateway/#transit-gateway "Permanent link")
===============================================================================================================================================

-   **Transitive peering** between thousands of VPCs and on-premise data centers using **hub-and-spoke (star) topology**
-   Works with **Direct Connect Gateway**, **VPN Connection** and **VPC**
-   **Bound to a region**
-   Transitive peering between VPCs in **same region & account**
-   **Route Tables** to control communication within the transitive network
-   Supports **IP Multicast** (not supported by any other AWS service)
-   Diagram
    -   ![attachments/Pasted image 20220513002130.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513002130.jpg)

Increasing BW of Site-to-Site VPN connection[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/transit%20gateway/#increasing-bw-of-site-to-site-vpn-connection "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **ECMP** (equal-cost multi-path) routing is a routing strategy to allow to forward a packet over multiple best path
-   To increase the bandwidth of the connection between Transit Gateway and corporate data center, create multiple site-to-site VPN connections, each with 2 tunnels (2 x 1.25 = 2.5 Gbps per VPN connection).
    -   ![attachments/Pasted image 20220513002301.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513002301.jpg)
-   Only one VPN connection to a VPC having 2 tunnels out of which only 1 is used (1.25 Gbps)

Share DX between multiple Accounts[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/transit%20gateway/#share-dx-between-multiple-accounts "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Share Transit Gateway across accounts using [Resource Access Manager (RAM)](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Resource%20Access%20Manager%20(RAM)) connection between VPCs in the **same region but different accounts**

![attachments/Pasted image 20220513003853.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513003853.jpg)



Networking Costs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/networking%20costs/#networking-costs "Permanent link")
==================================================================================================================================================

Inter-AZ and Inter-Region Networking[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/networking%20costs/#inter-az-and-inter-region-networking "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Traffic entering the AWS is free
-   Use Private IP instead of Public IP for good savings and better network performance
-   Traffic leaving an AWS region is paid
-   Use same AZ for maximum savings (at the cost of availability) ![attachments/Pasted image 20220513100858.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513100858.jpg)

Minimizing Egress Traffic[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/networking%20costs/#minimizing-egress-traffic "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Try to keep as much internet traffic within AWS to minimize costs
-   Direct Connect location that are co-located in the same AWS Region result in lower cost for egress network ![attachments/Pasted image 20220513101339.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513101339.jpg)

S3 Data Transfer[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/networking%20costs/#s3-data-transfer "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------

-   S3 ingress (uploading to S3): free
-   S3 to Internet: $0.09 per GB
-   S3 Transfer Acceleration:
    -   Additional cost on top of Data Transfer (+$0.04 to $0.08 per GB)
-   S3 to CloudFront: free (internal network)
-   CloudFront to Internet: $0.085 per GB (slightly cheaper than S3)
    -   Caching capability (lower latency)
    -   Reduced costs of S3 Requests (cheaper than just S3)
-   S3 Cross Region Replication: $0.02 per GB ![attachments/Pasted image 20220513101700.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513101700.jpg)



Reachability Analyzer[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/reachability%20analyzer/#reachability-analyzer "Permanent link")
=================================================================================================================================================================

-   A network diagnostics tool that **troubleshoots network connectivity** between two endpoints in your VPC
-   It builds a model of the network configuration, then checks the reachability based on these configurations (**doesn't send packets, just tests the configurations**)
-   When the destination is:
    -   Reachable - it produces hop-by-hop details of the virtual network path
    -   Not reachable - it identifies the blocking components (eg. configuration issues In SGs, NACLs, Route Tables, etc.)
-   Use cases:
    -   Troubleshoot connectivity issues
    -   Ensure network configuration is as intended



Traffic Mirroring[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/traffic%20mirroring/#traffic-mirroring "Permanent link")
=====================================================================================================================================================

-   Capture and inspect network traffic in your [VPC](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Virtual%20Private%20Cloud%20(VPC)) without disturbing the normal flow of traffic
-   Inbound and outbound traffic through ENIs (eg. attached to EC2 instances) will be mirrored to the destination (NLB) for inspection without affecting the original traffic.
-   Capture the traffic
    -   From (Source) ENIs
    -   To (Targets) an ENI or [NLB](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20Load%20Balancer%20(ELB)#network-load-balancer-nlb)
-   Source and Target can be in the same or different VPCs (**VPC Peering**)
-   Use cases: **content inspection**, **threat monitoring**, troubleshooting, etc.

![attachments/Pasted image 20220513004847.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513004847.jpg)




Simple Queue Service (SQS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#simple-queue-service-sqs "Permanent link")
==================================================================================================================================================================================

-   Used to asynchronously decouple applications
-   Supports multiple producers & consumers
-   The consumer polls the queue for messages. Once a consumer processes a message, it deletes it from the queue using **DeleteMessage** API.
-   Unlimited number of messages in queue
-   Max 10 messages received per batch (configured using `MaxNumberOfMessages` parameter in the ReceiveMessage API)
-   **Max message size: 256KB**
-   **Default message retention: 4 days (max: 14 days)**
-   **Consumers could be EC2 instances or Lambda functions**

> SQS cannot ingest data, it must be sent to the queue by the producer (use [Kinesis ⮕ Kinesis Data Stream KDS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Kinesis#kinesis-data-stream-kds) instead)

Queue Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#queue-types "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------

#### Standard Queue[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#standard-queue "Permanent link")

-   Unlimited throughput (publish any number of message per second into the queue)
-   Low latency (<10 ms on publish and receive)
-   Can have duplicate messages (at least once delivery)
-   Can have out of order messages (best effort ordering)

#### FIFO Queue[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#fifo-queue "Permanent link")

-   Limited throughput
    -   300 msg/s without batching (batch size = 1)
    -   3000 msg/s with batching (batch size = 10)
-   **The queue name must end with** `.fifo` to be considered a FIFO queue
-   **Message De-duplication**
    -   De-duplication interval: 5 min (duplicate messages will be discarded only if they are sent less than 5 mins apart)
    -   De-duplication methods:
        -   **Content-based de-duplication**: computes the hash of the message body and compares
        -   **Using a message de-duplication ID**: messages with the same de-duplication ID are considered duplicates
-   **Message Grouping**
    -   Group messages based on `MessageGroupID` to send them to different consumers
    -   Same value for `MessageGroupID`
        -   All the messages are in order
        -   Single consumer
    -   Different values for `MessageGroupID`
        -   Messages will be ordered for each group ID
        -   Ordering across groups is not guaranteed
        -   Each group ID can have a different consumer (parallel processing)
        -   Max number of consumers = number of unique group IDs

Consumer Auto Scaling[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#consumer-auto-scaling "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

We can attach an [ASG](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Auto%20Scaling%20Group%20(ASG)) to the consumer instances which will scale based on the CW metric = Queue length / Number of EC2 instances. CW alarms can be triggered to step scale the consumer application.

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#encryption "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------

-   In-flight encryption using HTTPS API
-   At-rest server-side encryption:
    -   SSE-SQS: keys managed by SQS
    -   SSE-KMS: keys managed by KMS
-   Client-side encryption

Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#access-management "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **IAM Policies** to regulate access to the SQS API
-   **SQS Access Policies** (resource based policy)
    -   Used for cross-account access to SQS queues
        -   The example policy allows any resource in the account 111122223333 to poll the SQS queue for messages. ![attachments/Pasted image 20230220113656.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230220113656.jpg)
    -   Used for allowing other AWS services to send messages to an SQS queue
        -   The example policy allows any AWS account to send messages to the queue as long as it is coming from the desired S3 bucket and the source account is the one owning the bucket. ![attachments/Pasted image 20230220113819.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230220113819.jpg)

Configurations[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#configurations "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Message Visibility Timeout[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#message-visibility-timeout "Permanent link")

-   Once a message is polled by a consumer, it becomes invisible to other consumers for the duration of message visibility timeout. After the message visibility timeout is over, the message becomes visible in the queue if it is not deleted by the consumer.
-   If a consumer dies while processing the message, it will be visible in the queue after the visibility timeout.
-   If a message is not processed within the visibility timeout, it will be processed again (by another consumer). However, a consumer could call the `ChangeMessageVisibility` API to change the visibility timeout for that specific message. This will give the consumer more time to process the message.
-   **Default: 30s**
-   Can be configured for the entire queue
    -   High: if the consumer crashes, re-processing will take long
    -   Low: may get duplicate processing of messages
-   Image
    -   ![attachments/Pasted image 20220509201807.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509201807.jpg)

#### Dead Letter Queue (DLQ)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#dead-letter-queue-dlq "Permanent link")

-   An SQS queue used to store failing to be processed messages in another queue
-   After the `MaximumReceives` threshold is exceeded, the message goes into the DLQ
-   **Redrive to Source** - once the bug in the consumer has been resolved, messages in the DLQ can be sent back to the queue (original queue or a custom queue) for processing
-   Prevents resource wastage
-   Recommended to set a high retention period for DLQ (14 days)

#### Queue Delay[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#queue-delay "Permanent link")

-   Consumers see the message after some delay
-   Default: 0 (Max: 15 min)
-   Can be set at the queue level
-   Can override the default queue delay for a specific message using the `DelaySeconds` parameter in the `SendMessage` API

#### Long Polling[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#long-polling "Permanent link")

-   Poll the queue for longer
-   Decreases the number of API calls made to SQS (**cheaper**)
-   Reduces latency (incoming messages during the polling will be read instantaneously)
-   **Polling time: 1 sec to 20 sec**
-   Long Polling is preferred over Short Polling
-   Can be enabled at the queue level or at the consumer level by using `WaitTimeSeconds` parameter in `ReceiveMessage` API.

Request-Response System[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#request-response-system "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   The idea is to build a request-response system where both the requesters and responders can scale independently. The requester sends the request into a request queue with attributes "correlation ID" and "reply to". This request will be picked by one of many responders in an ASG. The request will be processed and it will be sent to the right response queue along with the same "correlation ID". The "correlation ID" will help the requester identify which response corresponds to their request.
-   To implement this pattern: use the **SQS Temporary Queue Client** which leverages virtual queues instead of creating / deleting SQS queues (cost-effective).
-   ![attachments/Pasted image 20220509203244.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509203244.jpg)

SQS + Lambda + DLQ[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#sqs-lambda-dlq "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Failed messages (after the set number of retries) are sent to the DLQ by the SQS queue
    -   ![attachments/Pasted image 20220513220430.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513220430.jpg)

Handling Priority[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20queue%20service%20(sqs)/#handling-priority "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------

> Use two SQS queues, one for low priority (ex. free) and the other for high priority (ex. paid). Configure your consuming application to only poll the low priority queue if the high priority queue is empty.




Simple Notification Service (SNS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#simple-notification-service-sns "Permanent link")
=======================================================================================================================================================================================================

-   Used to broadcast messages
-   Pub-Sub model (publisher publishes messages to a topic, subscribers listen to the topic)
-   Instant message delivery (does not queue messages)

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#encryption "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   In-flight encryption by default using HTTPS API
-   At-rest encryption using KMS keys (optional)
-   Client-side encryption

Access Management[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#access-management "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **lAM policies** to regulate access to the SNS API
-   **SNS Access Policies** (resource based policy)
    -   Used for cross-account access to SNS topics
    -   Used for allowing other AWS services to publish to an SNS topic

Standard Topics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#standard-topics "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Highest throughput
-   At least once message delivery
-   Best effort ordering
-   Subscribers can be:
    -   SQS queues
    -   HTTP / HTTPS endpoints
    -   Lambda functions
    -   Emails (using SNS)
    -   SMS & Mobile Notifications
    -   Kinesis Data Firehose (KDF) to send the data into S3 or Redshift

FIFO Topics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#fifo-topics "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Guaranteed ordering of messages in that topic
-   Publishing messages to a FIFO topic requires:
    -   **Group ID**: messages will be ordered and grouped for each group ID
    -   **Message deduplication ID**: for deduplication of messages
-   **Can only have SQS FIFO queues as subscribers**
-   **Limited throughput (same as SQS FIFO)** because only SQS FIFO queues can read from FIFO topics
-   **The topic name must end with** `.fifo`

SNS + [SQS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Queue%20Service%20(SQS)) Fanout Pattern[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#sns-sqs-fanout-pattern "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Fully decoupled, no data loss
-   SQS allows for: data persistence, delayed processing and retries of work
-   Make sure your SQS queue access policy allows for SNS to write
-   Diagram
    -   ![attachments/Pasted image 20220509205738.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509205738.jpg)

Message Filtering[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#message-filtering "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   JSON policy used to filter messages sent to SNS topic's subscriptions
-   Each subscriber will have its own filter policy (if a subscriber doesn't have a filter policy, it receives every message)
-   Ex: filter messages sent to each queue by the order status

SNS + Lambda + DLQ[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/simple%20notification%20service%20(sns)/#sns-lambda-dlq "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Lambda retries each failed message 3 times after which it is **sent to the DLQ by lambda**
    -   ![attachments/Pasted image 20220513220228.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513220228.jpg)



Kinesis[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/kinesis/#kinesis "Permanent link")
=====================================================================================================================

> Kinesis Agent cannot write to a Kinesis Firehose for which the delivery stream source is already set as Kinesis Data Streams

Kinesis Data Stream (KDS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/kinesis/#kinesis-data-stream-kds "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------

-   Real-time data streaming service
-   **Used to ingest data in real time directly from source**
-   **Capacity Modes**
    -   Provisioned
        -   Publishing: 1MB/sec per shard or 1000 msg/sec per shard
        -   Consuming:
            -   2MB/sec per shard (throughput shared between all consumers)
            -   **Enhanced Fanout**: 2MB/sec per shard per consumer (dedicated throughput for each consumer)
        -   Throughput scales with shards (**manual scaling**)
        -   Pay per shard provisioned per hour
    -   On-demand
        -   No need to provision or manage the capacity
        -   Default capacity provisioned - 4 MB/sec or 4000 records/sec
        -   Scales automatically based on observed throughput peak during the last 30 days
        -   Pay per stream per hour & data in/out per GB
-   **Not Serverless**
-   **Data Retention: 1 day (default) to 365 days**
-   A record consists of a **partition key** (used to partition data coming from multiple publishers) and data blob (**max 1MB**)
-   Records will be ordered in each shard
-   Producers use SDK, Kinesis Producer Library (KPL) or **Kinesis Agent** to publish records
-   Consumers use SDK or Kinesis Client Library (KCL) to consume the records
-   **Once data is inserted in Kinesis, it can't be modified or deleted (immutability)**
-   Ability to reprocess (replay) data
-   Diagram
    -   ![attachments/Pasted image 20220509221100.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509221100.jpg)

Kinesis Data Firehose (KDF)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/kinesis/#kinesis-data-firehose-kdf "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to load streaming data into a target location
-   **Writes data in batches efficiently (near real time)**
    -   Buffer size (size of the batch) - 1 MB to 128MB (default 5MB)
    -   Buffer interval (how long to wait for buffer to fill up) - 60s to 900s (default 300s)
    -   Greater the buffer size, higher the write efficiency, longer it will take to fill the buffer
-   **Can ingest data in real time directly from source**
-   **Auto-scaling**
-   **Serverless**
-   Destinations:
    -   AWS: Redshift, S3, **OpenSearch**
    -   3rd party: Splunk, MongoDB, DataDog, NewRelic, etc.
    -   Custom HTTP endpoint
-   Pay for data going through Firehose (no provisioning)
-   **Supports custom data transformation using Lambda functions**
-   No replay capability (does not store data like KDS) ![attachments/Pasted image 20230221145737.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230221145737.jpg)

Kinesis Data Analytics (KDA)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/kinesis/#kinesis-data-analytics-kda "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Perform **real-time analytics on Kinesis streams using SQL**
-   Creates streams from SQL query response
-   **Cannot ingest data directly from source** (ingests data from KDS or KDF)
-   **Auto-scaling**
-   **Serverless**
-   Pay for the data processed (no provisioning)
-   Use cases:
    -   Time-series analytics
    -   Real-time dashboards
    -   Real-time metrics
-   ![attachments/Pasted image 20230221151731.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230221151731.jpg)

Kinesis Video Streams[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/kinesis/#kinesis-video-streams "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------

-   Capture, process and store video streams



Amazon MQ[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/amazon%20mq/#amazon-mq "Permanent link")
=============================================================================================================================

-   If you have some traditional applications running from on-premise, they may use open protocols such as **MQTT, AMQP, STOMP, Openwire, WSS**, etc. When migrating to the cloud, instead of re-engineering the application to use SQS and SNS (AWS proprietary), we can use Amazon MQ (managed Apache ActiveMQ) for communication.
-   Doesn't "scale" as much as SQS or SNS because it is provisioned
-   Runs on a dedicated machine (can run in HA with failover)
-   **Has both queue feature (SQS) and topic features (SNS)**

High Availability[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/amazon%20mq/#high-availability "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------

-   [High Availability](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#high-availability) in Amazon MQ works by leveraging MQ broker in multi AZ (active and standby).
-   EFS (NFS that can be mounted to multi AZ) is used to keep the files safe in case the main AZ is down. ![attachments/Pasted image 20220509223723.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509223723.jpg)



EventBridge[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/eventbridge/#eventbridge "Permanent link")
=================================================================================================================================

-   Extension of [CloudWatch ⮕ Events](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudWatch#events)
-   Event buses types:
    -   **Default event bus**: events from AWS services are sent to this
    -   **Partner event bus**: receive events from external SaaS applications
    -   **Custom Event bus**: for your own applications
-   Event Rules: how to process the events
-   **Event buses support cross-account access**
-   **Cron Jobs**: when creating an EB rule, we can select "Schedule" instead of event pattern to trigger an event based on a cron expression.
-   Can archive events (all or based on a filter) sent to an event bus to replay later

> EventBridge is recommended for decoupling applications that reacts to events from third-party **SaaS** applications.

Schema Registry[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/eventbridge/#schema-registry "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------

-   Defines how the data is structured in the event bus
-   Schema can be versioned

Event Bus Policy[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/eventbridge/#event-bus-policy "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------

-   Manage permissions for an event bus
-   Useful to allow or deny events from another AWS account or region ![attachments/Pasted image 20230219100242.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230219100242.jpg)



Identity & Access Management (IAM)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#identity-access-management-iam "Permanent link")
==========================================================================================================================================================================================================

-   Global Service (IAM entities like roles can be used in any region without recreation)

> **IAM Query API** can be used to make direct calls to the IAM web service (using access key ID and secret access key for authentication)

Users & Groups[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#users-groups "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Groups are collections of users and have policies attached to them
-   Groups cannot be nested
-   User can belong to multiple groups
-   User doesn't have to belong to a group
-   **Root User** has full access to the account
-   **IAM User** has limited permission to the account
-   You should log in as an IAM user with **admin access** even if you have root access. This is just to be sure that nothing goes wrong by accident.

> -   An IAM Group is not an identity and cannot be identified as a principal in an IAM policy
> -   Only users and services can assume a role (not groups)
> -   A new IAM user created using the AWS CLI or AWS API has no AWS credentials

Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#policies "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Policies are JSON documents that outline permissions for users, groups or roles
-   Two types
    -   **User based policies**
        -   IAM policies define which API calls should be allowed for a specific user
    -   **Resource based policies**
        -   Control access to an AWS resource
        -   Grant the specified principal permission to perform actions on the resource and define under what conditions this applies
-   An IAM principal can access a resource if the user policy ALLOWS it OR the resource policy ALLOWS it AND there's no explicit DENY.
-   Policies assigned to a user are called inline policies
-   Follow **least privilege principle** for IAM Policies
-   Policy Structure
    -   ![attachments/Pasted image 20220505202904.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220505202904.jpg)

#### Trust Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#trust-policies "Permanent link")

-   Defines which principal entities (accounts, users, roles, federated users) can assume the role
-   An IAM role is both an identity and a resource that supports resource-based policies.
-   You must attach both a trust policy and an identity-based policy to an IAM role.
-   The **IAM service supports only one type of resource-based policy** called a **role trust policy**, which is **attached to an IAM role**.

Roles[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#roles "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------

-   Collection of policies for AWS services

> If you are going to use an IAM Service Role with Amazon EC2 or another AWS service that uses Amazon EC2, you must store the role in an **instance profile**. When you create an IAM service role for EC2, the role automatically has EC2 identified as a trusted entity.

Protect IAM Accounts[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#protect-iam-accounts "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Password Policy**
    -   Used to enforce standards for password
        -   password rotation
        -   password reuse
    -   Prevents **brute force** attack
-   **Multi Factor Authentication (MFA)**
    -   Both root user and IAM users should use MFA

Reporting Tools[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#reporting-tools "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Credentials Report**
    -   lists all the users and the status of their credentials (MFA, password rotation, etc.)
    -   **account level** - used to audit security for all the users
-   **Access Advisor**
    -   shows the service permissions granted to a user and when those services were last accessed
    -   **user-level**
    -   used to revise policies for a specific user

Access Keys[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#access-keys "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Need to use access keys for AWS CLI and SDK
-   Don't share access keys with anyone (every user can generate their own access keys)
-   Access keys are only shown once and if you lose them you need to generate a new access key
-   Access Key ID ~ username
-   Secret Access Key ~ password

Guidelines[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#guidelines "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Use root account only for account setup
-   1 physical user = 1 IAM user
-   Enforce MFA for both root and IAM users
-   Never share lAM credentials & Access Keys

Policy Simulator[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#policy-simulator "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Online tool that allows us to check what API calls an IAM User, Group or Role is allowed to perform based on the permissions they have.

Permission Boundaries[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#permission-boundaries "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Set the maximum permissions an IAM entity can get
-   **Can be applied to users and roles (not groups)**
-   Used to ensure some users can't escalate their privileges (make themselves admin)

Assume Role vs Resource-based Policy[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20&%20access%20management%20(iam)/#assume-role-vs-resource-based-policy "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   When you assume an IAM Role, you give up your original permissions and take the permissions assigned to the role
-   When using a resource based policy, the principal doesn't have to give up their permissions

* * * * *

*Last updated: 2022-05-20*




Cognito[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cognito/#cognito "Permanent link")
=====================================================================================================================

Amazon Cognito lets you add user sign-up, sign-in, and access control to your web and mobile apps quickly and easily. Amazon Cognito scales to millions of users and supports sign-in with social identity providers, such as Apple, Facebook, Google, and Amazon, and enterprise identity providers via SAML 2.0 and OpenID Connect.

Cognito User Pools (CUP)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cognito/#cognito-user-pools-cup "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------

-   **Serverless** identity provider (provides sign in functionality for app users)
-   Sends back a JSON Web Token (used to verify the identity of the user)
-   **MFA support**
-   **Supports Federated Identities** allowing users to authenticate via third party identity provider like Facebook, Google, SAML, etc.
-   Seamless integration with **API Gateway** & **ALB** for authentication

Cognito Identity Pools (CIP)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cognito/#cognito-identity-pools-cip "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Provides temporary credentials (using STS) to users so they can access AWS resources
-   Integrates with CUP as an identity provider
-   Example use case: provide **temporary access to write to an S3 bucket** after authenticating the user via FaceBook (using CUP identity federation)
    -   Can't use S3 pre-signed URL as we need to provide access to a bucket location and not an single object


Security Token Service (STS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/security%20token%20service%20(sts)/#security-token-service-sts "Permanent link")
========================================================================================================================================================================================

-   Used to grant limited and temporary access to AWS resources
-   Token is valid for up to 1h

AssumeRole[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/security%20token%20service%20(sts)/#assumerole "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Allows IAM Users to assume an IAM Role**
-   Steps to assume a role
    -   Create an lAM Role (within your account or cross-account)
    -   [Trust Policy](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Identity%20&%20Access%20Management%20(IAM)#trust-policies): define which principals should be allowed to assume this role
    -   Use STS `AssumeRole` API to retrieve temporary credentials for the IAM role
    -   STS will check with IAM whether or not the user is allowed to assume that role
    -   ![attachments/Pasted image 20220511095712.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511095712.jpg)
-   Use cases:
    -   Safety: deleting a resource first requires users to temporarily assume a role
    -   **Cross-account access**: assume role in target account to perform actions there
        -   ![attachments/Pasted image 20220511095752.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511095752.jpg)

AssumeRoleWithSAML[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/security%20token%20service%20(sts)/#assumerolewithsaml "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Allow **non IAM users** logged in with SAML to assume an IAM role

AssumeRoleWithWebldentity[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/security%20token%20service%20(sts)/#assumerolewithwebldentity "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Allow **non IAM users** logged in via an identity provider (Facebook, Google, etc.) to assume an IAM role
-   AWS recommends using [Cognito](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Cognito) instead



Identity Federation in AWS[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20federation%20in%20aws/#identity-federation-in-aws "Permanent link")
====================================================================================================================================================================================

-   Federation lets **users outside of AWS to assume temporary role** for accessing AWS resources using a **third-party identity provider**
-   **Need to configure IAM roles** with the required policies that users will assume
-   No need to create lAM users (user management by the third-party identity provider)
-   Need to setup a trust between identity provider and IAM
-   Flavors
    -   SAML 2.0
    -   Custom Identity Broker
    -   Web Identity Federation with Amazon Cognito
    -   Web Identity Federation without Amazon Cognito (not recommended)
    -   Single Sign On
    -   Non-SAML with AWS Microsoft AD

SAML 2.0 Federation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20federation%20in%20aws/#saml-20-federation "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to integrate **Active Directory / ADFS** with AWS using **SAML compatible IDP**
-   **Client exchanges SAML assertion for security credentials from STS** using the STS `AssumeRoleWithSAML` API
-   Flow diagram
    -   ![attachments/Pasted image 20220511103954.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511103954.jpg)

> SSO can be implemented using an existing IDP like AD using SAML 2.0 Federation

Custom Identity Broker Federation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20federation%20in%20aws/#custom-identity-broker-federation "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Used when the identity provider is **not compatible with SAML 2.0 or OIDC**
-   **Identity broker gets security credentials from STS** using the STS `AssumeRole` or `GetFederationToken` API
-   Flow diagram
    -   ![attachments/Pasted image 20220511122254.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511122254.jpg)

Steps in Custom Identity Broker Federation

Web Identity Federation with Cognito[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/identity%20federation%20in%20aws/#web-identity-federation-with-cognito "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Use for **OpenID Connect (OIDC) compatible IDP** like CUP, FaceBook, Google etc.
-   Example: provide temporary access to write to S3 bucket using Facebook Login
-   Steps
    -   Log in to federated identity provider to get JWT
    -   Use the JWT to authenticate to **Federated Identity Pool**
    -   Get temporary AWS credentials back from the Federated Identity Pool
-   Flow diagram
    -   ![attachments/Pasted image 20220511124149.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511124149.jpg)




AWS Organizations[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20organizations/#aws-organizations "Permanent link")
=====================================================================================================================================================

-   **Global service**
-   Manage multiple AWS accounts under an organization
    -   1 master account
    -   member accounts
-   An AWS account can only be part of one organization
-   **Consolidated Billing** across all accounts (lower cost)
-   Pricing benefits from aggregated usage of AWS resources
-   API to automate AWS account creation (on demand account creation)
-   Establish Cross Account Roles for Admin purposes where the master account can assume an admin role in any of the children accounts

> Organization API can only create member accounts. They cannot configure anything within those accounts (use [CloudFormation](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFormation) for that).

Organizational Units (OU)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20organizations/#organizational-units-ou "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Folders for grouping AWS accounts of an organization
-   Can be nested
    -   ![attachments/Pasted image 20220511200502.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511200502.jpg)

Service Control Policies (SCP)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20organizations/#service-control-policies-scp "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Whitelist or blacklist IAM actions at the OU or Account level**
-   **Does not apply to the Master Account**
-   Applies to all the Users and Roles of the member accounts, including the root user. So, if something is restricted for that account, even the root user of that account won't be able to do it.
-   Must have an explicit allow (**does not allow anything by default**)
-   **Does not apply to service-linked roles**
-   **Explicit Deny** has the highest precedence

Migrating Accounts between Organizations[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20organizations/#migrating-accounts-between-organizations "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   To migrate member accounts from one organization to another
    1.  Remove the member account from the old organization
    2.  Send an invite to the member account from the new organization
    3.  Accept the invite from the member account
-   To migrate the master account
    1.  Remove the member accounts from the organizations using procedure above
    2.  Delete the old organization
    3.  Repeat the process above to invite the old master account to the new org




AWS Directory Services[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20directory%20services/#aws-directory-services "Permanent link")
======================================================================================================================================================================

-   Used to extend the AD network by involving services like EC2 to be a part of the AD to share login credentials.

Exam tip

AWS Managed Microsoft AD[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20directory%20services/#aws-managed-microsoft-ad "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Login credentials are shared between on-premise and AWS managed AD
-   **Manage users on both AD (on-premise and on AWS managed AD)**
-   Supports MFA
-   Establish trust connections with your on premise AD
-   Supports **directory-aware workloads on AWS**

AD Connector[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20directory%20services/#ad-connector "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------

-   AD connector will proxy all the requests to the on-premise AD
-   **Users are managed on the on-premise AD only**
-   Does not support directory-aware workloads on AWS

Simple AD[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/aws%20directory%20services/#simple-ad "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------

-   AD-compatible managed directory on AWS (**cannot be joined with on-premise AD**)
-   **Users are managed on the AWS AD only**
-   Use when you don't have an on-premise AD



AWS Single Sign-On (SSO)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/single%20sign-on%20(sso)/#aws-single-sign-on-sso "Permanent link")
======================================================================================================================================================================

-   **Free service**
-   **Integrated with AWS Organizations** (login once for your org and you can access all the accounts within that org)
-   **Integration with on-premise Active Directory**
-   **Supports SAML 2.0**
-   Centralized auditing with CloudTrail

Federated SSO vs AWS SSO[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/single%20sign-on%20(sso)/#federated-sso-vs-aws-sso "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   With Federated SSO, we need to maintain a **3rd party identity provider** (AD/ADFS, CUP, Google, Facebook, custom identity broker) login portal. The IDP returns the JWT or SAML Assertion which the client needs to exchange with STS for login credentials.
-   With AWS SSO, we don't need to manage the login portal, it is done through the AWS SSO. It returns the credentials directly. ![attachments/Pasted image 20220511204548.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511204548.jpg)



CloudFront[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#cloudfront "Permanent link")
==============================================================================================================================

-   Global service
-   Global Content Delivery Network (CDN)
-   **Edge Locations are present outside the VPC** so the origin's SG must be configured to allow inbound requests from the list of public IPs of all the edge locations.
-   Supports HTTP/RTMP protocol (**does not support UDP protocol**)
-   **Caches content at edge locations**, reducing load at the origin
-   **Geo Restriction feature**
-   Improves performance for both cacheable content (such as images and videos) and dynamic content (such as API acceleration and dynamic site delivery)
-   To block a specific IP at the CloudFront level, deploy a [WAF](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Web%20Application%20Firewall%20(WAF)) on CloudFront
-   Supports **Server Name Indication (SNI)** to allow SSL traffic to multiple domains

Origin[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#origin "Permanent link")
----------------------------------------------------------------------------------------------------------------------

-   **[S3](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3)) Bucket**
    -   For distributing static files
    -   **Origin Access Identity (OAl) or Origin Access Control (OAC)** allows the S3 bucket to only be accessed by CloudFront
    -   Can be used as ingress to upload files to S3
-   **Custom Origin** (for HTTP) - need to be publicly accessible on HTTP by public IPs of edge locations
    -   EC2 Instance
    -   ELB
    -   S3 Website (may contain client-side script)
    -   On-premise backend

> To restrict access to ELB directly when it is being used as the origin in a CloudFront distribution, create a VPC Security Group for the ELB and use AWS Lambda to automatically update the CloudFront internal service IP addresses when they change.

Signed URL / Cookies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#signed-url-cookies "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------

-   Used to **make a CloudFront distribution private** (distribute to a subset of users)
-   Signed URL ⇒ access to individual files
-   Signed Cookies ⇒ access to multiple files
-   Whenever we create a signed URL / cookie, we attach a policy specifying:
    -   URL / Cookie Expiration (TTL)
    -   **IP ranges** allowed to access the data
    -   Trusted signers (which AWS accounts can create signed URLs)

Pricing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#pricing "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   Price Class All: all regions (best performance)
-   Price Class 200: most regions (excludes the most expensive regions)
-   Price Class 100: only the least expensive regions

Multiple Origin[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#multiple-origin "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------

-   Route to different origins based on the path in the request
    -   ![attachments/Pasted image 20220508161137.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220508161137.jpg)

Origin Groups[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#origin-groups "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------

-   Consists of a **primary** and a **secondary** origin (can be in **different regions**)
-   Automatic failover to secondary
    -   ![attachments/Pasted image 20220508161659.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220508161659.jpg)
-   Provides **region-level** [High Availability](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#high-availability)
-   Use when getting 504 (gateway timeout) Error

Field-level Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudfront/#field-level-encryption "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------

-   Sensitive information sent by the user is encrypted at the edge close to user which can only be decrypted by the web server (intermediate services can't see the encrypted fields)
-   **Asymmetric Encryption** (public & private key)
-   Max 10 encrypted field




Global Accelerator[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/global%20accelerator/#global-accelerator "Permanent link")
========================================================================================================================================================

-   Global service
-   **Improves availability of the application for global users**
-   Leverages the private AWS network to route requests to the application (faster)
-   **Supports globally distributed application endpoints**
-   **Does not cache anything at the edge location**
-   Endpoint could be public or private (could span multiple regions)
    -   Elastic IP
    -   EC2 instances
    -   ALB
    -   NLB
-   **Endpoint Weights** and **Traffic Dials** are used in [Blue-Green Deployment](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Blue-Green%20Deployment)
-   **Not affected by client's DNS caching** because the 2 anycast IPs are static (traffic dials and endpoint weights changes are effective within seconds)
-   Good for
    -   non-HTTP use cases:
        -   Gaming (UDP)
        -   IoT (MQTT)
        -   Voice over IP (VoIP)
    -   HTTP use cases that require static IP addresses or fast regional failover

Working[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/global%20accelerator/#working "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------

-   **2 [anycast](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#unicast-vs-anycast-ip) public IPs (static)** are created for your application globally. Requests from clients hitting these IPs will automatically be routed to the nearest edge location. The Edge locations send the traffic to your application through the private AWS network.
-   **Traffic dials** to control the percentage of traffic that is directed to an endpoint group (an AWS region where your application is deployed)
-   **Endpoint weights** to determine the proportion of traffic that is directed to endpoints in an endpoint group

Disaster Recovery[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/global%20accelerator/#disaster-recovery "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------

-   Global Accelerator performs **health checks** for the application
-   **Failover in less than 1 minute** for unhealthy endpoints

Security[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/global%20accelerator/#security "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------

-   Only 2 static IP need to be whitelisted by the clients
-   Can be integrated with **AWS Shield for DDoS protection**



CloudWatch[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#cloudwatch "Permanent link")
==============================================================================================================================

-   Serverless performance monitoring service

Metrics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#metrics "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   Variables to monitor in CloudWatch
-   Dimension is an attribute of a metric (instance id, environment, etc.)
-   Up to 30 dimensions per metric
-   Segregated by namespaces (which AWS service they monitor)

#### Custom Metrics[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#custom-metrics "Permanent link")

-   Define and send your own custom metrics to CloudWatch using **PutMetricData API**
-   Metric resolution (StorageResolution API) - frequency of sending metric data
-   **Standard**: **60 seconds**
-   **High Resolution**: 1/5/10/30 seconds (higher cost)
-   Accepts metric data points **two weeks in the past and two hours in the future**

#### EC2 Monitoring[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#ec2-monitoring "Permanent link")

-   Must run a **CloudWatch agent** on instance to push system **metrics and logs** to CloudWatch. Instance role (IAM) must allow the instance to push logs to CloudWatch.
-   EC2 instances have metrics **every 5 minutes**
-   With **detailed monitoring** (for a cost), you get metrics **every 1 minute**
-   Use detailed monitoring if you want to react faster to changes (eg. scale faster for your ASG)
-   **Available metrics in CloudWatch**:
    -   CPU Utilization
    -   Network Utilization
    -   Disk Performance
    -   Disk Reads/Writes
-   **Custom metrics**:
    -   Memory utilization (memory usage)
    -   Disk swap utilization
    -   Disk space utilization
    -   Page file utilization
-   CloudWatch agent can be used for logging on premises servers too
-   **CW Unified Agent** can send logs & additional system-level metrics
    -   CPU (active, guest, idle, system, user, steal)
    -   Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops)
    -   RAM (free, inactive, used, total, cached)
    -   Netstat (number of TCP and UDP connections, net packets, bytes)
    -   Processes (total, dead, bloqued, idle, running, sleep)
    -   Swap Space (free, used, used %)

Dashboards[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#dashboards "Permanent link")
------------------------------------------------------------------------------------------------------------------------------

-   Setup custom dashboards for quick access to key metrics and alarms
-   **Dashboards are global** (allows to **monitor services across accounts & regions**)
-   Dashboards can be shared with people who don't have an AWS account (public, email address, 3rd party SSO provider through Cognito)

Logs[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#logs "Permanent link")
------------------------------------------------------------------------------------------------------------------

-   Used to store application logs
-   Log Groups represent an application sending logs to CW
-   Log Streams represent instances within applications or log files or containers
-   Logs Expiration: never expire (default), 30 days, etc.
-   Logs can be sent to:
    -   S3 buckets (exports)
    -   Kinesis Data Streams
    -   Kinesis Data Firehose
    -   Lambda functions
    -   ElasticSearch
-   **Metric Filters** can be used to filter expressions and use the count to trigger CloudWatch alarms. They apply only on the incoming metrics after the metric filter was created. Example filters:
    -   find a specific IP in the logs
    -   count occurrences of "ERROR" in the logs
-   **Cloud Watch Logs Insights** can be used to query logs and add queries to CloudWatch Dashboards
-   To stream logs in real-time, apply a **Subscription Filter** on logs
-   Logs can take up to **12 hours to become available for exporting to S3** (not real-time). To store logs in real time in S3, use a subscription filter to publish logs to KDF in real time which will then write the logs to S3.
-   Logs from multiple accounts and regions can be aggregated using subscription filters
    -   ![attachments/Pasted image 20220510222924.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220510222924.jpg)

> Metric Filters are a part of CloudWatch Logs (not CloudWatch Metrics)

Alarms[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#alarms "Permanent link")
----------------------------------------------------------------------------------------------------------------------

-   Alarms are used to trigger notifications for CW metrics based on **Metric Filters**
-   Various options to trigger alarm (sampling, %, max, min, etc.)
-   An alarm monitors a single CW metric
-   Alarm States:
    -   OK
    -   INSUFFICIENT_DATA
    -   ALARM
-   Period:
    -   Length of time in seconds to evaluate the metric before triggering the alarm
    -   High resolution custom metrics: **10 sec**, 30 sec or multiples of 60 sec
-   **Targets**:
    -   Stop, Terminate, Reboot, or Recover an EC2 Instance
    -   Trigger Auto Scaling Action (ASG)
    -   Send notification to SNS
-   **Composite Alarms** monitor multiple other alarms with AND/OR conditions to generate a new alarm. This is helpful to reduce alarm noise by creating complex composite alarms. Example: send an SNS notification when both CPU and IOPS are above 90% utilization. ![attachments/Pasted image 20230219094745.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230219094745.jpg)

EC2 Instance Recovery

Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudwatch/#events "Permanent link")
----------------------------------------------------------------------------------------------------------------------

-   Schedule or Cron to create events on a schedule
-   **Uses default event bus (custom & partner event buses are not supported)**



CloudTrail[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#cloudtrail "Permanent link")
==============================================================================================================================

-   **Global Service** (a single trail can be applied to multiple regions)
-   Provides governance, compliance and audit for the AWS Account
-   Enabled by default
-   Records the API calls made within the AWS account
-   **Event retention: 90 days**
-   Export CloudTrail logs into
    -   [CloudWatch Logs](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudWatch#logs)
    -   [S3](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3)) (encrypted by default using **SSE-S3**)
-   CloudTrail logs up to the last 90 days can be analyzed in CloudTrail Console. Older logs should be present in S3 and can be analyzed using Athena.

> Modifications to log files can be detected by enabling **Log File Validation** on the logging bucket

Event Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#event-types "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------

#### Management Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#management-events "Permanent link")

-   Events of operations that modify AWS resources. Ex:
    -   Creating a new IAM user
    -   Deleting a subnet
-   **Enabled by default**
-   Can separate Read Events (that don't modify resources) from Write Events (that may modify resources)

#### Data Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#data-events "Permanent link")

-   Events of operations that modify data
    -   S3 object-level activity
    -   Lambda function execution
-   **Disabled by default** (due to high volume of data events)

#### Insight Events[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#insight-events "Permanent link")

-   Enable **CloudTrail Insights** to detect unusual activity in your account
    -   inaccurate resource provisioning
    -   hitting service limits
    -   bursts of AWS IAM actions
    -   gaps in periodic maintenance activity
-   CloudTrail Insights analyzes normal management events to create a baseline and then continuously analyzes write events to detect unusual patterns. If that happens, CloudTrail generates insight events that
    -   show anomalies in the Cloud Trail console
    -   can can be logged to S3
    -   can trigger an EventBridge event for automation

Encryption[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudtrail/#encryption "Permanent link")
------------------------------------------------------------------------------------------------------------------------------

> CloudTrail logs are encrypted by default using SSE-S3
>
> A single KMS key can be used to encrypt log files for trails applied to all regions




Config[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/config/#config "Permanent link")
==================================================================================================================

-   Regional service
-   Can be aggregated across regions and accounts
-   Record configurations changes over time
-   **Evaluate compliance of resources using config rules**
-   **Does not prevent non-compliant actions** from happening (no deny)
-   Evaluate config rules
    -   for each config change (ex. configuration of EBS volume is changed)
    -   at regular time intervals (ex. every 2 hours)
-   Can make custom config rules (must be defined in Lambda functions) such as:
    -   Check if each EBS disk is of type gp2
    -   Check if each EC2 instance is t2.micro
-   **Can be used along with CloudTrail** to get a timeline of changes in configuration and compliance overtime.
-   **Integrates with EventBridge or SNS** to trigger notifications when AWS resources are non-compliant

Remediation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/config/#remediation "Permanent link")
----------------------------------------------------------------------------------------------------------------------------

-   Automate remediation of non-compliant resources using **SSM Automation Documents**
    -   AWS-Managed Automation Documents
    -   **Custom Automation Documents**
        -   to invoke a Lambda function for automation
-   You can set Remediation Retries if the resource is still non-compliant after auto remediation
-   Ex. if IAM access key expires (non-compliant), trigger an auto-remediation action to revoke unused IAM user credentials.


X-Ray[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/x-ray/#x-ray "Permanent link")
===============================================================================================================

-   Provides an **end-to-end view of requests as they travel through your application**, and shows a map of your application's underlying components.
-   AWS X-Ray helps developers analyze and debug production, distributed applications, such as those built using a **micro-services architecture**.
-   Helps understand how your application and its underlying services are performing to identify and troubleshoot the root cause of performance issues and errors.
-   Can collect data across AWS Accounts. The **X-Ray agent** can **assume a role** to publish data into an account different from the one in which it is running. This enables you to publish data from various components of your application into a **central account**.

Trusted Advisor[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/trusted%20advisor/#trusted-advisor "Permanent link")
===============================================================================================================================================

-   Service that analyzes your AWS accounts and provides **recommendations** on:
    -   **Cost Optimization**
        -   low utilization EC2 instances, EBS volumes, idle load balancers, etc.
        -   Reserved instances & savings plans optimizations
    -   **Performance**
        -   High utilization EC2 instances, CloudFront CDN optimizations
        -   EC2 to EBS throughput optimizations, Alias records recommendations
    -   **Security**:
        -   MFA enabled on Root Account, IAM key rotation, exposed Access Keys
        -   S3 Bucket Permissions for public access, security groups with unrestricted ports
    -   **Fault Tolerance**:
        -   EBS snapshots age, Availability Zone Balance
        -   ASG Multi-AZ, RDS Multi-AZ, ELB configuration, etc.
    -   **Service Limits**
        -   whether or not you are reaching the service limit for a service and suggest you to increase the limit beforehand
-   **No installation needed**
-   **Weekly email notifications**



CostExplorer[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/costexplorer/#costexplorer "Permanent link")
====================================================================================================================================

-   Visualize and manage your costs and service usage over time
-   Create **custom reports** that analyze cost and usage data
-   **Recommendations** to choose an optimal savings plan
-   View usage for the **last 12 months & forecast up to 12 months**

> AWS Cost Explorer helps you identify under-utilized EC2 instancess


Elastic Container Service (ECS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#elastic-container-service-ecs "Permanent link")
=================================================================================================================================================================================================

-   AWS managed container orchestration platform
-   Integrates with ALB for load balancing to ECS tasks
-   [EFS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Elastic%20File%20System%20(EFS)) is used as persistent multi-AZ shared storage for ECS tasks

Launch Types[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#launch-types "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

#### EC2 Launch Type[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#ec2-launch-type "Permanent link")

-   **Not Serverless**
-   Containers run on underlying EC2 instances
-   ECS takes care of launching & stopping containers (ECS tasks)
-   You must provision & maintain EC2 instances (use ASG)
-   **EC2 instances have ECS agent running on them as a docker container**
-   Inside a VPC spanning multiple AZ, there is an ECS cluster spanning multiple AZ. Inside the ECS cluster, there will be an ASG responsible for launching container instances (EC2). On every EC2 instance, ECS agent will be running (happens automatically if you choose the AMI for ECS when launching the instance) which registers these instances to the ECS cluster. This will allow the ECS cluster to run Docker containers (ECS tasks) on these instances.
    -   ![attachments/Pasted image 20220509230845.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509230845.jpg)

#### Fargate Launch Type[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#fargate-launch-type "Permanent link")

-   **Serverless**
-   No need to provision infrastructure
-   No need to worry about infrastructure scaling
-   ECS launches the required containers based on the CPU / RAM needed (**we won't know where these containers are running**)
-   VPC and ECS cluster are setup the same way as in EC2 launch type, but instead of using [ASG](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Auto%20Scaling%20Group%20(ASG)) with EC2 instances, we have a Fargate cluster spanning multiple AZ. The Fargate cluster will run ECS tasks anywhere within the cluster and attach an ENI (private IP) to each task. So, if we have a lot of ECS tasks, **we need sufficient free private IPs**.
    -   ![attachments/Pasted image 20220509231345.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509231345.jpg)

IAM Roles for ECS Tasks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#iam-roles-for-ecs-tasks "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **EC2 Instance Profile** (IAM role for the EC2 instance)
    -   Used by the ECS agent to:
        -   Make API calls to ECS service
        -   Send container logs to Cloud Watch
        -   Pull Docker image from ECR
-   **Task Execution Role**
    -   Allows ECS tasks to access AWS resources
    -   Each task can have a separate role
    -   **Use different roles for the different ECS Services**
    -   Task Role is defined in the task definition
    -   Use `taskRoleArn` parameter to assign IAM policies to ECS Task Execution Role
    -   Ex. Reference sensitive data in **Secrets Manager** or **SSM Parameter Store**

ECS Services[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#ecs-services "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------

-   An ECS Service is a **collection of long-running ECS tasks** (eg. web application) that perform the same function
-   We can use ALB to send requests to these tasks
-   **Service CPU Usage** or the **SQS queue length** for a service are used for scaling
-   Diagram
    -   ![attachments/Pasted image 20220509232531.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509232531.jpg)

Load Balancing[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#load-balancing "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **EC2 Launch Type**
    -   For every container, the container port is mapped to a random free port on the hots (instance). So the application running inside that container will be reached by the ALB on that random port. ![attachments/Pasted image 20230215182905.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020230215182905.jpg)
    -   **Dynamic Host Port Mapping** - Once the ALB is registered to a service in the ECS cluster, it will automatically find the right port on the EC2 Instances. This only works with ALB, not CLB.
    -   You **must allow on the EC2 instance's security group any port from the ALB security group** because it may attach on any port
    -   Diagram
        -   ![attachments/Pasted image 20220509232914.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509232914.jpg)
-   **Fargate Launch Type**
    -   **Each task has a unique IP but the same container port**
    -   The ALB connects to each task directly on its IP and container port since these containers are not run on a defined host (instance).
    -   You **must allow on the ENI's security group the task port from the ALB security group**
    -   Diagram
        -   ![attachments/Pasted image 20220509233226.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509233226.jpg)

Rolling Updates[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#rolling-updates "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Minimum healthy percentage** - determines how many tasks, running the current version, we can terminate while staying above the threshold
-   **Maximum percentage** - determines how many new tasks, running the new version, we can launch while staying below the threshold
-   Min: 50% and Max: 100% and starting number of tasks 4
    -   ![attachments/Pasted image 20220509234001.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509234001.jpg)
-   Min: 100% and Max: 150% and starting number of tasks 4
    -   ![attachments/Pasted image 20220509234016.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509234016.jpg)

Secrets in ECS tasks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#secrets-in-ecs-tasks "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Store the secrets in [Parameter Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Secrets%20Manager%5D%5D%20or%20%5B%5BSSM%20Parameter%20Store) and encrypt them using KMS
-   Reference the secrets in container definition with the name of the environment variable
-   Create an **ECS task execution role** and reference it with your task definition, which allows access to both KMS and the Parameter Store/Secrets Manager.
-   Supported for both EC2 and Fargate launch types

Scaling ECS Tasks using EventBridge[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#scaling-ecs-tasks-using-eventbridge "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   You can use EventBridge (CloudWatch Events) to run Amazon ECS tasks when certain AWS events occur.
-   Ex: set up a CloudWatch Events rule that runs an Amazon ECS task whenever a file is uploaded to an S3 bucket. You can also declare a reduced number of ECS tasks whenever a file is deleted from the S3 bucket.

Troubleshooting Steps[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20service%20(ecs)/#troubleshooting-steps "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Verify that the Docker daemon is running on the container instance.
-   Verify that the Docker Container daemon is running on the container instance.
-   Verify that the container agent is running on the container instance.
-   Verify that the IAM instance profile has the necessary permissions.



Elastic Kubernetes Service (EKS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20kubernetes%20service%20(eks)/#elastic-kubernetes-service-eks "Permanent link")
====================================================================================================================================================================================================

-   Used to launch [Kubernetes](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Concepts#kubernetes) (**open-source**) clusters on AWS
-   **Supports both EC2 and Fargate launch types**
-   Inside the EKS cluster, we have **EKS nodes (EC2 instances)** and **EKS pods (tasks)** within them. We can use a private or public load balancer to access these EKS pods.![attachments/Pasted image 20220509235639.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509235639.jpg)

> **CloudWatch Container Insights** can be configured to view metrics and logs for an EKS cluster in the CloudWatch console

Use case[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20kubernetes%20service%20(eks)/#use-case "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------

-   If your company is already using Kubernetes on-premises or in another cloud, and wants to migrate to AWS using Kubernetes



Elastic Container Registry (ECR)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20container%20registry%20(ecr)/#elastic-container-registry-ecr "Permanent link")
====================================================================================================================================================================================================

-   AWS managed private Docker repository
-   **Pay for the storage you use** to store docker images (no provisioning)
-   Integrated with ECS & **IAM for security**
-   Storage backed by [S3](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3))
-   Can upload Docker images on ECR manually or we can use a CICD service like **CodeBuild**



CloudFormation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudformation/#cloudformation "Permanent link")
==========================================================================================================================================

-   **Infrastructure as Code (IaC)** allows us to write our infrastructure as a config file which can be easily replicated & versioned using Git
-   **Declarative** way of outlining your AWS Infrastructure (no need to specify ordering and orchestration)
-   Resources within a stack is tagged with an identifier (easy to track cost of each stack)
-   Ability to destroy and re-create infrastructure on the fly
-   Deleting a stack deletes every single artifact that was created by CloudFormation (clean way of deleting resources)

CloudFormation Templates[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudformation/#cloudformation-templates "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   YAML file that defines a CloudFormation Stack
-   **Templates have to be uploaded in S3** and then referenced in CloudFormation
-   To update a template, upload a new version of the template
-   Template components:
    -   **Resources**: AWS resources declared in the template (**mandatory**)
    -   Parameters: Dynamic inputs for your template
    -   Mappings: Static variables for your template
    -   Outputs: References to what has been created (will be returned upon stack creation)
    -   Conditionals: List of conditions to perform resource creation
    -   Metadata
-   Templates helpers:
    -   References
    -   Functions

> -   You can associate the `CreationPolicy` attribute with a resource to prevent its status from reaching create complete until CloudFormation receives a specified number of `cfn-signal` or the timeout period is exceeded.
> -   Use CloudFormation with **securely configured templates** to ensure that applications are deployed in secure configurations

Stack Sets[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudformation/#stack-sets "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------

-   Create, update, or delete stacks across **multiple accounts and regions** with a single operation
-   When you update a stack set, all associated stack instances are updated throughout all accounts and regions.

Updating Stacks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudformation/#updating-stacks "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------

-   CloudFormation provides two methods for updating stacks:
    -   **Direct update**
        -   CloudFormation immediately deploys the submitted changes. You cannot preview the changes.
    -   **Change Sets**
        -   You can preview the changes CloudFormation will make to your stack, and then decide whether to apply those changes.



Elastic Beanstalk[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20beanstalk/#elastic-beanstalk "Permanent link")
=====================================================================================================================================================

-   Used to **deploy applications** on AWS infrastructure
-   **Platform as a Service (PaaS)**
-   Automatically handles capacity provisioning, load balancing, scaling, application health monitoring, instance configuration, etc. but **we have full control over the configuration**
-   **Free** (pay for the underlying resources)
-   Supports versioning of application code
-   Can create multiple environment (dev, test, prod)
-   Supports the deployment of web applications from **Docker** containers and automatically handles load balancing, auto-scaling, monitoring, and placing containers across the cluster.

Web & Worker Environments[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20beanstalk/#web-worker-environments "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Web Environment (Web Server Tier): clients requests are directly handled by EC2 instances through a load balancer.
-   Worker Environment (Worker Tier): clients's requests are put in a SQS queue and the EC2 instances will pull the messages to process them. Scaling depends on the number of SQS messages in the queue. ![attachments/Pasted image 20220507153757.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507153757.jpg)

Serverless Application Model (SAM)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/serverless%20application%20model%20(sam)/#serverless-application-model-sam "Permanent link")
==========================================================================================================================================================================================================

-   Extension of [CloudFormation](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFormation)
-   **Framework for developing and deploying serverless applications**
-   Configuration is **YAML**
-   Can run Lambda, API Gateway, DynamoDB locally for development and debugging
-   Can use **CodeDeploy** to deploy Lambda functions


Continuous Integration Continuous Delivery (CICD)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/continuous%20integration%20continuous%20delivery%20(cicd)/#continuous-integration-continuous-delivery-cicd "Permanent link")
=========================================================================================================================================================================================================================================================

Continuous Integration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/continuous%20integration%20continuous%20delivery%20(cicd)/#continuous-integration "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Developers push the code to a code repository often (GitHub / CodeCommit / Bitbucket)
-   A testing / build server checks the code as soon as it's pushed (CodeBuild / Jenkins CI)
-   The developer gets feedback about the tests and checks that have passed / failed
-   Deliver faster as the code is tested automatically

Continuous Delivery[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/continuous%20integration%20continuous%20delivery%20(cicd)/#continuous-delivery "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Ensure that the software can be released reliably whenever needed
-   Ensures deployments happen often and are quick
-   Automated deployment using CodeDeploy, Jenkins CD, etc.

Technology Stack for CICD[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/continuous%20integration%20continuous%20delivery%20(cicd)/#technology-stack-for-cicd "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   AWS **CodeCommit** is a fully managed code repository.
-   AWS **CodeBuild** is a fully managed continuous integration (CI) service that compiles source code, runs tests, and produces software packages that are ready to deploy. It is an alternative to Jenkins.
-   AWS **CodeDeploy** is a fully managed deployment service that automates software deployments to a variety of computing services such as EC2, Fargate, Lambda, and your on-premises servers. You can define the strategy you want to execute such as in-place or blue/green deployments.
    -   Used to deploy application, not infrastructure (use [CloudFormation](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/CloudFormation) for that)
-   AWS **CodePipeline** is a fully managed continuous delivery (CD) service that helps you automate your release pipeline for fast and reliable application and infrastructure updates. It automates the build, test, and deploy phases of your release process every time there is a code change. It has direct integration with Elastic Beanstalk. ![attachments/Pasted image 20220513225544.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513225544.jpg)

Blue-Green Deployment[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/blue-green%20deployment/#blue-green-deployment "Permanent link")
=================================================================================================================================================================

-   Blue-green deployment is a technique to test features in the new environment without impacting the currently running version of your application
    -   **Blue** - current version
    -   **Green** - new version
-   When you're satisfied that the green version is working properly, you can gradually reroute the traffic from the old blue environment to the new green environment.
-   Can mitigate common risks associated with deploying software, such as **downtime** and **rollback** capability.



Key Management Service (KMS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#key-management-service-kms "Permanent link")
========================================================================================================================================================================================

-   **Regional service (keys are bound to a region)**
-   Provides encryption and decryption of data and manages keys required for it
-   Encrypted secrets can be stored in the code or environment variables
-   **Encrypt up to 4KB of data per call (if data > 4 KB, use envelope encryption)**
-   Integrated with lAM for authorization
-   Audit key usage with CloudTrail
-   Need to set **IAM Policy & Key Policy** to allow a user or role to access a KMS key

Customer Master Key (CMK)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#customer-master-key-cmk "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Symmetric keys** (necessary for envelope encryption)
-   **Must call KMS API to encrypt data**
-   Two types:
    -   **AWS Owned CMK** (free)
        -   Default KMS key for each supported service
        -   Fully managed by AWS (cannot view, rotate or delete them)
    -   **Customer Owned CMK** (1$/month)
        -   **AWS Managed CMK**
            -   Generated in KMS
            -   Option to enable automatic yearly rotation
        -   **Customer Managed CMK**
            -   Generated and imported from outside
            -   Must be 256-bit symmetric key
            -   Not recommended
        -   Deletion has a waiting period (**pending deletion state**) between **7 - 30 days** (default 30 days). The key can be recovered during the pending deletion state.

Asymmetric Keys[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#asymmetric-keys "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Public (Encrypt) and Private Key (Decrypt) pair
-   Used for Encrypt/Decrypt, or Sign/Verify operations
-   The public key is downloadable, but you can't access the Private Key unencrypted
-   **No need to call the KMS API to encrypt data** (data can be encrypted by the client)
-   **Not eligible for automatic rotation** (use manual rotation)
-   Use case: encryption outside of AWS by users who can't call the KMS API

Key Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#key-policies "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Cannot access KMS keys without a key policy
-   **Default Key Policy**
    -   Created if you don't provide a specific Key Policy
    -   Complete access to the key for the root user ⇒ any user or role can access the key (most permissible)
-   **Custom Key Policy**
    -   Define users, roles that can access the KMS key
    -   Define who can administer the key
    -   Useful for cross-account access of your KMS key

Cross-region Encrypted Snapshot Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#cross-region-encrypted-snapshot-migration "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Copy the snapshot to another region with **re-encryption option** using a new key in the new region (keys are bound to a region)

Cross-account Encrypted Snapshot Migration[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#cross-account-encrypted-snapshot-migration "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Attach a Key Policy to the main CMK to authorize access to an IAM role in the target account (cross-account access)
    -   ![attachments/Pasted image 20220511214328.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511214328.jpg)
-   Share the encrypted snapshot with the new account
-   In the target account, create a copy of the snapshot (decryption will use the main CMK)
-   Encrypt it with a new KMS Key in your account

Key Rotation[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/key%20management%20service%20(kms)/#key-rotation "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Automatic**
    -   Supported only in Customer-owned CMK
    -   Automatic yearly key rotation
    -   Previous key is kept active (to decrypt old data)
    -   **New key has the same CMK ID** (only the backing key is changed)
    -   Diagram
        -   ![attachments/Pasted image 20220511215802.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511215802.jpg)
-   **Manual**
    -   **New Key has a different CMK ID**
    -   Keep the previous key active to decrypt old data
    -   Use aliases as CMK id changes after rotation (to hide the key change for the application). After rotation, use **UpdateAlias** API to point the alias to the new key.
    -   **Good for asymmetric keys** (automatic rotation not supported)
    -   Diagram
        -   ![attachments/Pasted image 20220511215742.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511215742.jpg)



SSM Parameter Store[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/ssm%20parameter%20store/#ssm-parameter-store "Permanent link")
=============================================================================================================================================================

-   Serverless
-   Used to store parameters & secrets
-   Parameter versioning
-   Seamless Encryption with KMS for encryption and decryption of stored secrets
-   Parameters are stored in hierarchical fashion

Tiers[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/ssm%20parameter%20store/#tiers "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------

|  | Standard Tier | Advanced Tier |
| --- | --- | --- |
| Number of parameters | 10,000 | 100,000 |
| Max parameter size | 4KB | 8KB |
| Parameter Policy | Not supported | Supported |
| Cost | Free | Paid |

Parameter Policies[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/ssm%20parameter%20store/#parameter-policies "Permanent link")
-----------------------------------------------------------------------------------------------------------------------------------------------------------

-   Only supported in advanced tier
-   Assign policies to a parameter for additional features
    -   Expire the parameter after some time (TTL)
    -   Parameter expiration notification
    -   Parameter change notification



Secrets Manager[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/secrets%20manager/#secrets-manager "Permanent link")
===============================================================================================================================================

-   For storing secrets only
-   **Ability to force rotation of secrets every n days** (not available in [Parameter Store](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/SSM%20Parameter%20Store))
-   A **secret consists of multiple key-value pairs**
-   Secrets are encrypted using [KMS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Key%20Management%20Service%20(KMS))
-   Mostly used for **[RDS](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Relational%20Database%20Service%20(RDS)) authentication**
    -   need to specify the username and password to access the database
    -   link the secret to the database to allow for automatic rotation of database login info
-   Can create custom secrets


CloudHSM[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/cloudhsm/#cloudhsm "Permanent link")
========================================================================================================================

-   AWS provisions **dedicated encryption hardware** (Hardware Security Module)
-   Use when you want to manage encryption keys completely
-   HSM device is stored in AWS (tamper resistant, FIPS 140-2 Level 3 compliance)
-   **Supports both symmetric and asymmetric encryption**
-   Good option to use with **SSE-C** encryption
-   CloudHSM clusters are spread across **Multi AZ (high availability)**
-   **Redshift supports CloudHSM** for database encryption and key management
-   IAM permissions are required to perform CRUD operations on HSM cluster
-   **CloudHSM Software** is used to manage the keys and users (in KMS, everything is managed using IAM)



OpsWorks[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/opsworks/#opsworks "Permanent link")
========================================================================================================================

-   **Chef & Puppet** are two open-source softwares that help you perform **server configuration** automatically, or repetitive actions
-   AWS OpsWorks is nothing but **AWS Managed Chef & Puppet**
-   They work great with EC2 & On Premise VM
-   It's an **alternative to AWS SSM**
-   Exam tip: **Chef & Puppet ⇒ AWS OpsWorks**



Athena[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/athena/#athena "Permanent link")
==================================================================================================================

-   **Serverless** query service to perform analytics on [S3](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/Simple%20Storage%20Service%20(S3))
-   Uses **SQL** language to query the files
-   **Runs directly on S3** (no copying needed)
-   Output stored in S3
-   Built on **Presto** engine
-   Supports CSV, JSON, ORC, AVI and Parquet file formats

> **Use compressed or columnar data for cost-savings** (due to less scan)
>
> Can be used along with **AWS Transcribe** (automatic speech recognition service that converts audio to text) to analyze audio for sentiment analysis.



Elastic Map Reduce (EMR)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/elastic%20map%20reduce%20(emr)/#elastic-map-reduce-emr "Permanent link")
============================================================================================================================================================================

-   Used to create **Big Data clusters** to **analyze and process** vast amounts of data
-   Uses **Hadoop**, an open-source framework, to distribute your data and processing across a **cluster of 100s of EC2 instances**.
-   Supports open-source tools such as **Apache Spark**, **HBase**, **Presto**, **Flink**, etc.
-   EMR takes care of all the provisioning and configuration
-   **Auto-scaling**
-   Integrated with **Spot Instances**
-   Can be used to process large amounts of log files

Concepts[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#concepts "Permanent link")
========================================================================================================================

Scalability[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#scalability "Permanent link")
------------------------------------------------------------------------------------------------------------------------------

-   Ability to handle greater loads by adapting
-   **Vertical Scalability** (scaling up / down)
    -   increasing the size (performance) of the instance
    -   used in non-distributed systems, such as a database.
    -   limited by hardware
-   **Horizontal Scalability** (elasticity) (scaling out / in)
    -   increasing the number of instances of the application
    -   used in distributed systems
    -   easier to achieve than vertical scalability

High Availability[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#high-availability "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------

-   Ability to survive a hardware or AZ failure
-   Achieved by running at least 2 instances of the application in different AZs
-   Cost effective way of implementing HA
    -   Stateless
        -   Create a system where only 1 EC2 instance stays active at a time. If the instance goes down, ASG will start a new one. Also, the EC2 instance will issue an API call to attach the Elastic IP based on tag. ![attachments/Pasted image 20220513222823.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513222823.jpg)
    -   Stateful
        -   The EC2 instance maintains state in an EBS volume (attached to an AZ). If the instance goes down, create a snapshot of the EBS volume which will be triggered on ASG Terminate lifecycle hook. Similarly, when a new instance is spun up, create a new EBS volume in the appropriate instance using the ASG Launch lifecycle hook. ![attachments/Pasted image 20220513222928.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220513222928.jpg)

DNS[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#dns "Permanent link")
--------------------------------------------------------------------------------------------------------------

-   Translates the human friendly hostnames into the machine IP addresses
-   **Terminologies**
    -   Domain Registrar: registers domain names (Amazon Route 53, GoDaddy, etc.)
    -   DNS Records: A, AAAA, CNAME, NS, etc.
    -   Hosted Zone: contains DNS records (used to match hostnames to IP addresses)
    -   Name Server (NS): resolves DNS queries (Authoritative or Non-Authoritative)
    -   Top Level Domain (TLD)
    -   Second Level Domain (SLD)
-   **Domain Name Structure**
    -   ![attachments/Pasted image 20220507120353.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507120353.jpg)
-   **How DNS works**
    -   Your web browser wants to access the domain example.com which is being served by a server at IP 9.10.11.12. Your browser will first query the local DNS server which if it has that domain cached, it will return it right away. Otherwise, it will ask the same question to the Root DNS server. The root DNS server will extract the TLD (.com) from the domain and direct the local DNS to the TLD DNS Server that can serve .com TLD. The query to the TLD DNS server will be the same. The TLD DNS server returns the IP of the SLD DNS server which can store the IP of web server hosting example.com. Once again the same query is made to the SLD DNS Server which returns the IP 9.10.11.12 instead of NS (named server).
    -   ![attachments/Pasted image 20220507120627.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507120627.jpg)

Cross-Origin Resource Sharing (CORS)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#cross-origin-resource-sharing-cors "Permanent link")
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   An origin is a combination of scheme (protocol), host (domain) and port. Eg: https://www.example.com (implied port is 443 for HTTPS, 80 for HTTP) Same origin: http://example.com/google & http://example.com/yahoo Different origins: http://google.example.com & http://yahoo.example.com

-   CORS is a **web browser based security** to allow requests to other origins while visiting the main origin only if the other origin allows for the requests from the main origin, using CORS Headers (`Access-Control-Allow-Origin` & `Access-Control-Allow-Methods`)

-   In the diagram below, web browser is on www.example.com and the server wants to redirect it to www.other.com In this case, the web browser will first send a preflight request to www.other.com via OPTIONS method, which requests permitted communication options for a given URL or server (www.example.com). The cross origin server responds with the methods that www.example.com is allowed to perform.

    -   ![attachments/Pasted image 20220507175132.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220507175132.jpg)

Database[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#database "Permanent link")
------------------------------------------------------------------------------------------------------------------------

-   **Durability** defines what are the chances of DB losing some stored data
-   **Availability** defines how readily available data stored in the DB is

Unicast vs Anycast IP[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#unicast-vs-anycast-ip "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------

-   **Unicast IP**: one server holds one IP address
-   **Anycast IP**: all servers hold the same IP address and the client is routed to the nearest one

Hybrid Cloud[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#hybrid-cloud "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------

-   Part of your infrastructure is on the cloud and the rest is on-premises
-   This can be due to
    -   Long cloud migrations
    -   Security requirements
    -   Compliance requirements

Application Communication[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#application-communication "Permanent link")
----------------------------------------------------------------------------------------------------------------------------------------------------------

-   **Synchronous (application → application)**
    -   Can be problematic if there are sudden spikes of traffic and one of the services gets overwhelmed
-   **Asynchronous / Event-based (application → queue → application)**
    -   Allows applications to scale independently to handle spikes in traffic

![attachments/Pasted image 20220509194411.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220509194411.jpg)

Kubernetes[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#kubernetes "Permanent link")
----------------------------------------------------------------------------------------------------------------------------

-   Kubernetes is an **open-source** system for automatic deployment, scaling and management of containerized (usually Docker) applications
-   Kubernetes is **cloud-agnostic** (can be used in any cloud provider). So, it is much more standardized.

Serverless[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#serverless "Permanent link")
----------------------------------------------------------------------------------------------------------------------------

-   Serverless is a new paradigm in which the developers don't have to provision or manage servers. They just deploy code.

Micro-Services Architecture[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#micro-services-architecture "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------

-   Many services interact with each other directly using a REST API
-   Allows us to have a leaner development lifecycle for each service
-   Services can scale independently of each other
-   Each service has a separate code repository (easy for development)
-   Communication between services:
    -   Synchronous patterns: API Gateway, Load Balancers
    -   Asynchronous patterns: SQS, Kinesis, SNS

Microsoft Active Directory (AD)[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#microsoft-active-directory-ad "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

-   It is a way to share login credentials of the users with all the machines within the network.
-   Objects are organized in trees. A group of trees is a forest
-   There is a domain controller. We will create an account there. Since each windows machine on the network is connected to the domain controller, this user can be logged in from any machine on the network.

Ephemeral Ports[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#ephemeral-ports "Permanent link")
--------------------------------------------------------------------------------------------------------------------------------------

When a client sends an HTTP request to a server, it does so on a fixed IP and port of the server. In the request, the client also sends a temporary port for the server to respond back. The server when sending the response uses this port which is only lived for the duration of this HTTP connection. ![attachments/Pasted image 20220512210852.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220512210852.jpg)

IPv6[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/concepts/#ipv6 "Permanent link")
----------------------------------------------------------------------------------------------------------------

-   IPv4 designed to provide 4.3 Billion addresses (they'll be exhausted soon)
-   IPV6 is designed to provide 3.4 x 10^38 unique IP addresses
-   **Every IPv6 address is public and Internet-routable (no private range)**
-   Format x.x.x.x.x.x.x.x (x is hexadecimal, range can be from 0000 to ffff)
-   Examples:
    -   2001:db8:3333:4444:5555:6666:7777:8888
    -   2001:db8:3333:4444:cccc:dddd:eeee:ffff
    -   :: ⇒ all 8 segments are zero
    -   2001:db8:: ⇒ the last 6 segments are zero
    -   ::1234:5678 ⇒ the first 6 segments are zero
    -   2001:db8::1234:5678 ⇒ the middle 4 segments are zero

Important Ports[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/important%20ports/#important-ports "Permanent link")
===============================================================================================================================================

Networking Ports[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/important%20ports/#networking-ports "Permanent link")
-------------------------------------------------------------------------------------------------------------------------------------------------

-   FTP: 21
-   SSH: 22
-   SFTP: 22 (same as SSH) - used for uploading files using SSH
-   HTTP: 80
-   HTTPS: 443
-   RDP (Remote Desktop Protocol): 3389

Database Ports[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/important%20ports/#database-ports "Permanent link")
---------------------------------------------------------------------------------------------------------------------------------------------

-   PostgreSQL: 5432
-   MySQL: 3306
-   Oracle RDS: 1521
-   MSSQL Server: 1433
-   MariaDB: 3306 (same as MySQL)
-   Aurora: 5432 (if PostgreSQL compatible) or 3306 (if MySQL compatible)

Shared Responsibility Model[¶](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/shared%20responsibility%20model/#shared-responsibility-model "Permanent link")
=====================================================================================================================================================================================

![attachments/Pasted image 20220511234345.jpg](https://notes.arkalim.org/notes/aws%20solutions%20architect%20associate/attachments/Pasted%20image%2020220511234345.jpg)


